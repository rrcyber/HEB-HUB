<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:ns2="http://www.tibco.com/namespaces/tnt/plugins/mail" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns1="http://www.tibco.com/pe/DeployedVarsType" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="http://www.tibco.com/pe/GenerateErrorActivity/InputSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:pfx="http://xmlns.tibco.com/body">
    <pd:name>Project Name Processes/Sub Process/getRejectedOperations.process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startType>
        <xsd:element name="group">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="folio" type="xsd:string"/>
                    <xsd:element name="operacion" type="xsd:string"/>
                    <xsd:element name="sucursal" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </pd:startType>
    <pd:startX>107</pd:startX>
    <pd:startY>331</pd:startY>
    <pd:returnBindings/>
    <pd:endName>End</pd:endName>
    <pd:endX>869</pd:endX>
    <pd:endY>336</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables/>
    <pd:targetNamespace>http://xmlns.example.com/1368075903468</pd:targetNamespace>
    <pd:group name="Group">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>225</pd:x>
        <pd:y>8</pd:y>
        <pd:width>518</pd:width>
        <pd:height>756</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>simpleGroup</pd:groupType>
            <pd:serializable>false</pd:serializable>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>SDITRFDTI</pd:to>
            <pd:xpathDescription>operacion=TRF</pd:xpathDescription>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$Start/group/operacion='TRF'</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>PHYENEREJ</pd:to>
            <pd:xpathDescription>operacion=PHY</pd:xpathDescription>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$Start/group/operacion='PHY'</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>HEB_SDIINVADI</pd:to>
            <pd:xpathDescription>operacion=INV</pd:xpathDescription>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$Start/group/operacion='INV'</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Null-1</pd:to>
            <pd:xpathDescription>operacion=RCV</pd:xpathDescription>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$Start/group/operacion='RCV'</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Null</pd:to>
            <pd:xpathDescription>operacion=PO</pd:xpathDescription>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$Start/group/operacion='PO'</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>Null-2</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Null-1</pd:from>
            <pd:to>SDIRCDREJ</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Null-1</pd:from>
            <pd:to>SDIRCHREJ</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Null</pd:from>
            <pd:to>SDIHDIREJ</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Null</pd:from>
            <pd:to>SDIDTIREJ</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>SDIHDIREJ</pd:from>
            <pd:to>Null-2</pd:to>
            <pd:lineType>One Bend</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>SDIRCHREJ</pd:from>
            <pd:to>Null-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>SDITRFDTI</pd:from>
            <pd:to>Null-2</pd:to>
            <pd:lineType>One Bend</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>SDIDTIREJ</pd:from>
            <pd:to>Group (1) (1)</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>SDIRCDREJ</pd:from>
            <pd:to>Group (1)</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Group (1)</pd:from>
            <pd:to>Null-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Group (1) (1)</pd:from>
            <pd:to>Null-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>HEB_SDIINVADI</pd:from>
            <pd:to>Group (1) (2)</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Group (1) (2)</pd:from>
            <pd:to>Null-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>PHYENEREJ</pd:from>
            <pd:to>Group PHY</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Group PHY</pd:from>
            <pd:to>Null-2</pd:to>
            <pd:lineType>One Bend</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="SDIHDIREJ">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>382</pd:x>
            <pd:y>77</pd:y>
            <config>
                <timeout>%%Connections/Database/DatabaseName/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>0</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <statement>select p.error_code, r.rej_desc from pmm.SDIHDIREJ p,   pmm.SDIREJCD r 
where p.date_created &gt;= trunc(sysdate-?)
and p.PMG_PO_NUMBER = ?
and r.rej_code = p.error_code</statement>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>ERROR_CODE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>-5</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>REJ_DESC</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>dias</parameterName>
                        <dataType>NUMERIC</dataType>
                    </parameter>
                    <parameter>
                        <parameterName>folio</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <dias>
                        <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BITACORA_FECHA/DIAS_ATRAS"/>
                    </dias>
                    <folio>
                        <xsl:value-of select="$Start/group/folio"/>
                    </folio>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="SDIDTIREJ">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>385</pd:x>
            <pd:y>143</pd:y>
            <config>
                <timeout>%%Connections/Database/DatabaseName/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>0</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>select p.prd_lvl_number, p.error_code, r.rej_desc from pmm.SDIDTIREJ p, pmm.SDIREJCD r 
where p.date_created &gt;= trunc(sysdate-?)
and p.PMG_PO_NUMBER = ?
and r.rej_code = p.error_code</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>dias</parameterName>
                        <dataType>NUMERIC</dataType>
                    </parameter>
                    <parameter>
                        <parameterName>folio</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>PRD_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nchar</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ERROR_CODE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>-5</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>REJ_DESC</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <dias>
                        <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BITACORA_FECHA/DIAS_ATRAS"/>
                    </dias>
                    <folio>
                        <xsl:value-of select="$Start/group/folio"/>
                    </folio>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="SDIRCHREJ">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>410</pd:x>
            <pd:y>259</pd:y>
            <config>
                <timeout>%%Connections/Database/DatabaseName/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>0</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>select p.error_code, r.rej_desc from pmm.Sdirchrej p, pmm.SDIREJCD r 
where p.rcv_session_id = ?
and r.rej_code = p.error_code</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>folio</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>ERROR_CODE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>-5</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>REJ_DESC</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <folio>
                        <xsl:value-of select="$Start/group/folio"/>
                    </folio>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="SDIRCDREJ">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>414</pd:x>
            <pd:y>317</pd:y>
            <config>
                <timeout>%%Connections/Database/DatabaseName/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>0</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>select p.prd_lvl_number, p.error_code, r.rej_desc from pmm.Sdircdrej p, pmm.SDIREJCD r 
where p.date_created &gt;= trunc(sysdate-?)
and p.rcv_session_id = ?
and r.rej_code = p.error_code</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>dias</parameterName>
                        <dataType>NUMERIC</dataType>
                    </parameter>
                    <parameter>
                        <parameterName>folio</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>PRD_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nchar</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ERROR_CODE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>-5</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>REJ_DESC</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <dias>
                        <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BITACORA_FECHA/DIAS_ATRAS"/>
                    </dias>
                    <folio>
                        <xsl:value-of select="$Start/group/folio"/>
                    </folio>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="HEB_SDIINVADI">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>386</pd:x>
            <pd:y>410</pd:y>
            <config>
                <timeout>%%Connections/Database/DatabaseName/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>0</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <statement>select p.prd_lvl_number, p.error_code, r.rej_desc from pmm.HEB_SDIINVADI p, pmm.SDIREJCD r 
where p.date_created &gt;= trunc(sysdate-?)
and ((p.TRANS_REF IN (9071, 9101) AND p.TRANS_REF2 = ?) OR (p.TRANS_REF = ?))
and r.rej_code = p.error_code</statement>
                <wizardData/>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>dias</parameterName>
                        <dataType>NUMERIC</dataType>
                    </parameter>
                    <parameter>
                        <parameterName>folio</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                    <parameter>
                        <parameterName>folio1</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>PRD_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nchar</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ERROR_CODE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>-5</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>REJ_DESC</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <dias>
                        <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BITACORA_FECHA/DIAS_ATRAS"/>
                    </dias>
                    <folio>
                        <xsl:value-of select="$Start/group/folio"/>
                    </folio>
                    <folio1>
                        <xsl:value-of select="$Start/group/folio"/>
                    </folio1>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="SDITRFDTI">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>337</pd:x>
            <pd:y>556</pd:y>
            <config>
                <timeout>%%Connections/Database/DatabaseName/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>0</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>select p.error_code, r.rej_desc from pmm.SDITRFDTI p, pmm.SDIREJCD r 
where p.date_created &gt;= trunc(sysdate-?)
and p.CARTON_NUMBER = ?
and p.ACTION_CODE = '08'
and r.rej_code = p.error_code</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>dias</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                    <parameter>
                        <parameterName>folio</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>ERROR_CODE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>-5</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>REJ_DESC</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <dias>
                        <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/BITACORA_FECHA/DIAS_ATRAS"/>
                    </dias>
                    <folio>
                        <xsl:value-of select="$Start/group/folio"/>
                    </folio>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Null">
            <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
            <pd:resourceType>ae.activities.null</pd:resourceType>
            <pd:x>288</pd:x>
            <pd:y>128</pd:y>
            <config/>
            <pd:inputBindings/>
        </pd:activity>
        <pd:activity name="Null-1">
            <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
            <pd:resourceType>ae.activities.null</pd:resourceType>
            <pd:x>333</pd:x>
            <pd:y>278</pd:y>
            <config/>
            <pd:inputBindings/>
        </pd:activity>
        <pd:activity name="Null-2">
            <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
            <pd:resourceType>ae.activities.null</pd:resourceType>
            <pd:x>647</pd:x>
            <pd:y>260</pd:y>
            <config/>
            <pd:inputBindings/>
        </pd:activity>
        <pd:group name="Group (1)">
            <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
            <pd:resourceType>ae.process.group</pd:resourceType>
            <pd:x>463</pd:x>
            <pd:y>258</pd:y>
            <pd:width>126</pd:width>
            <pd:height>140</pd:height>
            <pd:collapsedWidth>57</pd:collapsedWidth>
            <pd:collapsedHeight>70</pd:collapsedHeight>
            <pd:groupVariables/>
            <pd:joinToggle>inherit</pd:joinToggle>
            <config>
                <pd:groupType>inputLoop</pd:groupType>
                <pd:serializable>false</pd:serializable>
                <pd:over>$SDIRCDREJ/resultSet/Record</pd:over>
                <pd:iterationElementSlot>RCVarray</pd:iterationElementSlot>
                <pd:indexSlot>RCVindex</pd:indexSlot>
                <pd:outSlot>RCVtext</pd:outSlot>
                <pd:activityOutputName>Map Data</pd:activityOutputName>
                <pd:accumulateOutput>true</pd:accumulateOutput>
            </config>
            <pd:inputBindings/>
            <pd:expanded>true</pd:expanded>
            <pd:transition>
                <pd:from>start</pd:from>
                <pd:to>Map Data</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Map Data</pd:from>
                <pd:to>end</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:activity name="Map Data">
                <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
                <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
                <pd:x>525</pd:x>
                <pd:y>338</pd:y>
                <config>
                    <element>
                        <xsd:element name="root">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="texto" type="xsd:string"/>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </element>
                </config>
                <pd:inputBindings>
                    <root>
                        <texto>
                            <xsl:value-of select="concat('FOLIO=',$Start/group/folio, ' PRD_LVL_NUMBER=', $RCVarray/Record/PRD_LVL_NUMBER, ' ERROR_CODE=', $RCVarray/Record/ERROR_CODE, ' DESC=',$RCVarray/Record/REJ_DESC, &quot;&#xA;&quot;)"/>
                        </texto>
                    </root>
                </pd:inputBindings>
            </pd:activity>
        </pd:group>
        <pd:group name="Group (1) (1)">
            <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
            <pd:resourceType>ae.process.group</pd:resourceType>
            <pd:x>454</pd:x>
            <pd:y>73</pd:y>
            <pd:width>138</pd:width>
            <pd:height>140</pd:height>
            <pd:collapsedWidth>57</pd:collapsedWidth>
            <pd:collapsedHeight>70</pd:collapsedHeight>
            <pd:groupVariables/>
            <pd:joinToggle>inherit</pd:joinToggle>
            <config>
                <pd:groupType>inputLoop</pd:groupType>
                <pd:serializable>false</pd:serializable>
                <pd:over>$SDIDTIREJ/resultSet/Record</pd:over>
                <pd:iterationElementSlot>POarray</pd:iterationElementSlot>
                <pd:indexSlot>POindex</pd:indexSlot>
                <pd:outSlot>POtext</pd:outSlot>
                <pd:activityOutputName>Map-Data-1</pd:activityOutputName>
                <pd:accumulateOutput>true</pd:accumulateOutput>
            </config>
            <pd:inputBindings/>
            <pd:expanded>true</pd:expanded>
            <pd:transition>
                <pd:from>start</pd:from>
                <pd:to>Map-Data-1</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Map-Data-1</pd:from>
                <pd:to>end</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:activity name="Map-Data-1">
                <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
                <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
                <pd:x>512</pd:x>
                <pd:y>137</pd:y>
                <config>
                    <element>
                        <xsd:element name="root">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="texto" type="xsd:string"/>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </element>
                </config>
                <pd:inputBindings>
                    <root>
                        <texto>
                            <xsl:value-of select="concat('FOLIO=',$Start/group/folio, ' PRD_LVL_NUMBER=',$POarray/Record/PRD_LVL_NUMBER,  ' ERROR_CODE=', $POarray/Record/ERROR_CODE, ' DESC=',$POarray/Record/REJ_DESC, &quot;&#xA;&quot;)"/>
                        </texto>
                    </root>
                </pd:inputBindings>
            </pd:activity>
        </pd:group>
        <pd:group name="Group (1) (2)">
            <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
            <pd:resourceType>ae.process.group</pd:resourceType>
            <pd:x>479</pd:x>
            <pd:y>408</pd:y>
            <pd:width>138</pd:width>
            <pd:height>140</pd:height>
            <pd:collapsedWidth>57</pd:collapsedWidth>
            <pd:collapsedHeight>70</pd:collapsedHeight>
            <pd:groupVariables/>
            <pd:joinToggle>inherit</pd:joinToggle>
            <config>
                <pd:groupType>inputLoop</pd:groupType>
                <pd:serializable>false</pd:serializable>
                <pd:over>$HEB_SDIINVADI/resultSet/Record</pd:over>
                <pd:iterationElementSlot>INVarray</pd:iterationElementSlot>
                <pd:indexSlot>INVindex</pd:indexSlot>
                <pd:outSlot>INVtext</pd:outSlot>
                <pd:activityOutputName>Map-Data-2</pd:activityOutputName>
                <pd:accumulateOutput>true</pd:accumulateOutput>
            </config>
            <pd:inputBindings/>
            <pd:expanded>true</pd:expanded>
            <pd:transition>
                <pd:from>start</pd:from>
                <pd:to>Map-Data-2</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Map-Data-2</pd:from>
                <pd:to>end</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:activity name="Map-Data-2">
                <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
                <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
                <pd:x>537</pd:x>
                <pd:y>472</pd:y>
                <config>
                    <element>
                        <xsd:element name="root">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="texto" type="xsd:string"/>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </element>
                </config>
                <pd:inputBindings>
                    <root>
                        <texto>
                            <xsl:value-of select="concat('FOLIO=',$Start/group/folio, ' PRD_LVL_NUMBER=', $INVarray/Record/PRD_LVL_NUMBER, ' ERROR_CODE=', $INVarray/Record/ERROR_CODE, ' DESC=',$INVarray/Record/REJ_DESC, &quot;&#xA;&quot;)"/>
                        </texto>
                    </root>
                </pd:inputBindings>
            </pd:activity>
        </pd:group>
        <pd:activity name="PHYENEREJ">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>356</pd:x>
            <pd:y>677</pd:y>
            <config>
                <timeout>%%Connections/Database/DatabaseName/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>0</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>select batch_number, org_lvl_number, prd_lvl_number, error_code from PMM.phyenerej WHERE BATCH_NUMBER = ?</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>FOLIO</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>BATCH_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>2</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>RequiredElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ORG_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>2</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PRD_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nchar</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ERROR_CODE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>-5</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <FOLIO>
                        <xsl:value-of select="$Start/group/folio"/>
                    </FOLIO>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:group name="Group PHY">
            <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
            <pd:resourceType>ae.process.group</pd:resourceType>
            <pd:x>466</pd:x>
            <pd:y>576</pd:y>
            <pd:width>138</pd:width>
            <pd:height>140</pd:height>
            <pd:collapsedWidth>57</pd:collapsedWidth>
            <pd:collapsedHeight>70</pd:collapsedHeight>
            <pd:groupVariables/>
            <pd:joinToggle>inherit</pd:joinToggle>
            <config>
                <pd:groupType>inputLoop</pd:groupType>
                <pd:serializable>false</pd:serializable>
                <pd:over>$PHYENEREJ/resultSet/Record</pd:over>
                <pd:iterationElementSlot>PHYarray</pd:iterationElementSlot>
                <pd:indexSlot>PHYindex</pd:indexSlot>
                <pd:outSlot>PHYtext</pd:outSlot>
                <pd:activityOutputName>Map-Data-3</pd:activityOutputName>
                <pd:accumulateOutput>true</pd:accumulateOutput>
            </config>
            <pd:inputBindings/>
            <pd:expanded>true</pd:expanded>
            <pd:transition>
                <pd:from>start</pd:from>
                <pd:to>Map-Data-3</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Map-Data-3</pd:from>
                <pd:to>end</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:activity name="Map-Data-3">
                <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
                <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
                <pd:x>533</pd:x>
                <pd:y>655</pd:y>
                <config>
                    <element>
                        <xsd:element name="root">
                            <xsd:complexType>
                                <xsd:sequence>
                                    <xsd:element name="texto" type="xsd:string"/>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </element>
                </config>
                <pd:inputBindings>
                    <root>
                        <texto>
                            <xsl:value-of select="concat('FOLIO=',$Start/group/folio,'PRD_LVL_NUMBER=',$PHYarray/Record/PRD_LVL_NUMBER,'ERROR_CODE=', $PHYarray/Record/ERROR_CODE,&quot;&amp;if;&quot; )"/>
                        </texto>
                    </root>
                </pd:inputBindings>
            </pd:activity>
        </pd:group>
    </pd:group>
    <pd:activity name="Send Mail">
        <pd:type>com.tibco.plugin.mail.MailPubActivity</pd:type>
        <pd:resourceType>ae.activities.MailActivityResource</pd:resourceType>
        <pd:x>866</pd:x>
        <pd:y>167</pd:y>
        <config>
            <newMimeSupport>true</newMimeSupport>
            <inputOutputVersion>5.2.0</inputOutputVersion>
            <authenticate>false</authenticate>
            <host>%%ExceptionHandling/GLB_ERR_EMAIL_HOST%%</host>
            <InputHeaders>
                <xsd:element name="root">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="Content-Type" type="xsd:string" minOccurs="0"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </InputHeaders>
        </config>
        <pd:inputBindings>
            <ns2:mailActivityInput>
                <from>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/ExceptionHandling/GLB_ERR_EMAIL_FROM"/>
                </from>
                <to>
                    <xsl:value-of select="$_globalVariables/ns1:GlobalVariables/ExceptionHandling/GLB_ERR_EMAIL_TO"/>
                </to>
                <subject>
                    <xsl:value-of select="if($Start/group/operacion='PO') then (concat(&quot;Rechazo en SDIPMGHDI/SDIPMGDTI, Sucursal &quot;, $Start/group/sucursal)) else (&#xA; if($Start/group/operacion='RCV') then (concat(&quot;Rechazo en SDIRCVHDI/SDIRCVDTI, Sucursal &quot;, $Start/group/sucursal)) else (&#xA; if($Start/group/operacion='INV') then (concat(&quot;Rechazo en HEB_SDIINVADI, Sucursal &quot;, $Start/group/sucursal)) else (concat(&quot;Rechazo en SDITRFDTI, Sucursal &quot;, $Start/group/sucursal))))"/>
                </subject>
                <pfx:bodyElement>
                    <bodyText>
                        <xsl:value-of select="if($Start/group/operacion='PO') then (concat('FOLIO=',$Start/group/folio, ' ERROR_CODE=', $SDIHDIREJ/resultSet/Record[1]/ERROR_CODE, ' DESC=', $SDIHDIREJ/resultSet/Record[1]/REJ_DESC, &quot;&#xA;&quot;, $POtext/AccumulatedOutput)) else (&#xA;if($Start/group/operacion='RCV') then (concat('FOLIO=',$Start/group/folio, ' ERROR_CODE=', $SDIRCHREJ/resultSet/Record[1]/ERROR_CODE, ' DESC=', $SDIRCHREJ/resultSet/Record[1]/REJ_DESC , &quot;&#xA;&quot;, $RCVtext/AccumulatedOutput)) else (&#xA;if($Start/group/operacion='INV') then ($INVtext/AccumulatedOutput) else (concat('FOLIO=',$Start/group/folio, ' ERROR_CODE=', $SDITRFDTI/resultSet/Record[1]/ERROR_CODE, ' DESC=', $SDITRFDTI/resultSet/Record[1]/REJ_DESC))))"/>
                    </bodyText>
                </pfx:bodyElement>
                <Headers>
                    <Content-Type>
                        <xsl:value-of select="&quot;text/html&quot;"/>
                    </Content-Type>
                </Headers>
            </ns2:mailActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Generate Error">
        <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
        <pd:resourceType>ae.activities.throw</pd:resourceType>
        <pd:x>870</pd:x>
        <pd:y>438</pd:y>
        <config>
            <faultName/>
        </config>
        <pd:inputBindings>
            <ns:ActivityInput/>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>Group</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>Send Mail</pd:to>
        <pd:xpathDescription>Record&gt;0</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>if($Start/group/operacion='PO') then (count($SDIHDIREJ/resultSet/Record)&gt;0 or count($SDIDTIREJ/resultSet/Record)&gt;0) else (
if($Start/group/operacion='RCV') then (count($SDIRCHREJ/resultSet/Record)&gt;0 or count($SDIRCDREJ/resultSet/Record)&gt;0) else (
if($Start/group/operacion='TRF') then (count($SDITRFDTI/resultSet/Record)&gt;0) else (
if($Start/group/operacion='INV') then (count($HEB_SDIINVADI/resultSet/Record)&gt;0) else (
if($Start/group/operacion='PHY') then (count($PHYENEREJ/resultSet/Record)&gt;0) else (false())))))</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Send Mail</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>Generate Error</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-65536</pd:lineColor>
        <pd:conditionType>error</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>