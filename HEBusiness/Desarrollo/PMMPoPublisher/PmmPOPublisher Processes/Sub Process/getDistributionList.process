<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:BW="java://com.tibco.pe.core.JavaCustomXPATHFunctions" xmlns:ns2="www.tibco.com/plugin/Sleep" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns1="http://www.tibco.com/pe/EngineTypes" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="http://www.tibco.com/pe/DeployedVarsType" xmlns:ns0="http://www.tibco.com/pe/GenerateErrorActivity/InputSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:ns12="http://xmlns.heb.com/ei/ErrorManagementSchema" xmlns:pfx="http://xmlns.heb.com/ei/PURCHASEORDER_INFORMATION_COMPLETED" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <xsd:import namespace="http://xmlns.heb.com/ei/PURCHASEORDER_INFORMATION_COMPLETED" schemaLocation="/Shared Resources/Schema Definitions/Custom/PURCHASEORDER_INFORMATION_COMPLETED.xsd"/>
    <pd:name>PmmPOPublisher Processes/Sub Process/getDistributionList.process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startType>
        <xsd:element name="root">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="PMG_PO_NUMBER" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </pd:startType>
    <pd:startX>31</pd:startX>
    <pd:startY>560</pd:startY>
    <pd:returnBindings>
        <group>
            <xsl:for-each select="$Records/AccumulatedOutput/group">
                <xsl:for-each select="ITEM">
                    <ITEM>
                        <PRD_LVL_NUMBER>
                            <xsl:value-of select="PRD_LVL_NUMBER"/>
                        </PRD_LVL_NUMBER>
                        <ORG_LVL_NUMBER>
                            <xsl:value-of select="ORG_LVL_NUMBER"/>
                        </ORG_LVL_NUMBER>
                        <PMG_SELL_QTY>
                            <xsl:value-of select="PMG_SELL_QTY"/>
                        </PMG_SELL_QTY>
                        <SLL_UNITS_PER_INNER>
                            <xsl:value-of select="SLL_UNITS_PER_INNER"/>
                        </SLL_UNITS_PER_INNER>
                        <PMG_PO_NUMBER>
                            <xsl:value-of select="PMG_PO_NUMBER"/>
                        </PMG_PO_NUMBER>
                        <PMG_RELEASE_DATE>
                            <xsl:value-of select="PMG_RELEASE_DATE"/>
                        </PMG_RELEASE_DATE>
                        <SEGMENTO>
                            <xsl:value-of select="SEGMENTO"/>
                        </SEGMENTO>
                    </ITEM>
                </xsl:for-each>
            </xsl:for-each>
        </group>
    </pd:returnBindings>
    <pd:endName>End</pd:endName>
    <pd:endType>
        <xsd:element name="group">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="ITEM" minOccurs="0" maxOccurs="unbounded">
                        <xsd:complexType>
                            <xsd:sequence>
                                <xsd:element name="PRD_LVL_NUMBER" type="xsd:string" minOccurs="0"/>
                                <xsd:element name="ORG_LVL_NUMBER" type="xsd:string" minOccurs="0"/>
                                <xsd:element name="PMG_SELL_QTY" type="xsd:string" minOccurs="0"/>
                                <xsd:element name="SLL_UNITS_PER_INNER" type="xsd:string" minOccurs="0"/>
                                <xsd:element name="PMG_PO_NUMBER" type="xsd:string" minOccurs="0"/>
                                <xsd:element name="PMG_RELEASE_DATE" type="xsd:string" minOccurs="0"/>
                                <xsd:element name="SEGMENTO" type="xsd:string"/>
                            </xsd:sequence>
                        </xsd:complexType>
                    </xsd:element>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </pd:endType>
    <pd:endX>1618</pd:endX>
    <pd:endY>565</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables>
        <Variable2>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="flag_type" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </Variable2>
        <Variable1>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="flag_type" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </Variable1>
        <Variable0>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="flag_type" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </Variable0>
    </pd:processVariables>
    <pd:targetNamespace>http://xmlns.example.com/1372796822446</pd:targetNamespace>
    <pd:group name="Group (1)">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>687</pd:x>
        <pd:y>384</pd:y>
        <pd:width>348</pd:width>
        <pd:height>339</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>errorLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:indexSlot>count2</pd:indexSlot>
            <pd:errorCondition>$count2 &gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:errorCondition>
            <pd:suspendAfterErrorRetry>true</pd:suspendAfterErrorRetry>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>JDBC-Query-Detail-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query-Detail-1</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query-Detail-1</pd:from>
            <pd:to>Sleep-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-65536</pd:lineColor>
            <pd:conditionType>error</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep-1</pd:from>
            <pd:to>Generate-Error-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>otherwise</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep-1</pd:from>
            <pd:to>Error Process-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$count&gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>Error Process-2</pd:from>
            <pd:to>Generate-Error-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="JDBC-Query-Detail-1">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>766</pd:x>
            <pd:y>440</pd:y>
            <config>
                <timeout>%%Connections/Database/PMM/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>%%Connections/Database/PMM/GLB_MAX_ROWS%%</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>Select TRIM(B.prd_lvl_number) prd_lvl_number,
TRIM(C.org_lvl_number) org_lvl_number,
TRIM(A.PMG_SELL_QTY) PMG_SELL_QTY, TRIM(D.SLL_UNITS_PER_INNER) SLL_UNITS_PER_INNER,
TRIM(D.PMG_PO_NUMBER) PMG_PO_NUMBER,
TRIM(to_char(E.PMG_RELEASE_DATE, 'yyyy-mm-dd hh24:mi:ss')) PMG_RELEASE_DATE,
(select TRIM(SEG.PRD_LVL_NUMBER) Segmento
from pmm.prdmstee VARI
inner join pmm.prdmstee ESTI
on VARI.PRD_LVL_PARENT = ESTI.PRD_LVL_CHILD
inner join pmm.prdmstee SEG
on ESTI.PRD_LVL_PARENT = SEG.PRD_LVL_CHILD
where VARI.PRD_LVL_ID = 0
AND VARI.PRD_LVL_NUMBER = B.prd_lvl_number
union 
select TRIM(SEG.PRD_LVL_NUMBER) Segmento
from pmm.prdmstee ART
inner join pmm.prdmstee SEG
on ART.PRD_LVL_PARENT = SEG.PRD_LVL_CHILD
where ART.PRD_LVL_ID = 1
AND ART.PRD_LVL_NUMBER = B.prd_lvl_number) as SEGMENTO
from pmm.PMGALLEE A
inner join PMM.PRDMSTEE B on A.Prd_lvl_child = B.prd_lvl_child
inner join pmm.ORGMSTEE C on A.org_lvl_child = C.org_lvl_child
inner join pmm.pmgdtlee D on a.PMG_DTL_TECH_KEY = D.PMG_DTL_TECH_KEY
  and a.prd_lvl_child = d.prd_lvl_child
inner join pmm.pmghdree E on D.pmg_po_number = E.pmg_po_number
where D.pmg_po_number = ? and D.pmg_style_ind ='F'
and a.pmg_sell_qty &gt;0</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/PMM JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <wizardData/>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>PMG_PO_NUMBER</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>PRD_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ORG_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_SELL_QTY</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>SLL_UNITS_PER_INNER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_PO_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_RELEASE_DATE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>SEGMENTO</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <PMG_PO_NUMBER>
                        <xsl:value-of select="$Start/root/PMG_PO_NUMBER"/>
                    </PMG_PO_NUMBER>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Sleep-1">
            <pd:type>com.tibco.plugin.timer.SleepActivity</pd:type>
            <pd:resourceType>ae.activities.sleep</pd:resourceType>
            <pd:x>769</pd:x>
            <pd:y>544</pd:y>
            <config/>
            <pd:inputBindings>
                <ns2:SleepInputSchema>
                    <IntervalInMillisec>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_RETRY_DELAY"/>
                    </IntervalInMillisec>
                </ns2:SleepInputSchema>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Generate-Error-1">
            <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
            <pd:resourceType>ae.activities.throw</pd:resourceType>
            <pd:x>936</pd:x>
            <pd:y>545</pd:y>
            <config>
                <faultName/>
            </config>
            <pd:inputBindings>
                <ns0:ActivityInput>
                    <message>
                        <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                    </message>
                    <messageCode>
                        <xsl:value-of select="$_error/ns1:ErrorReport/MsgCode"/>
                    </messageCode>
                </ns0:ActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Error Process-2">
            <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
            <pd:resourceType>ae.process.subprocess</pd:resourceType>
            <pd:x>860</pd:x>
            <pd:y>648</pd:y>
            <config>
                <processName>/Utility Services/Exception Handling/ErrorProcess.process</processName>
            </config>
            <pd:inputBindings>
                <ns12:MSG_Container>
                    <ns12:Header>
                        <ns12:ProjectName>
                            <xsl:value-of select="$_processContext/ns1:ProcessContext/ProjectName"/>
                        </ns12:ProjectName>
                        <ns12:Source_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Source_Domain"/>
                        </ns12:Source_Domain>
                        <ns12:Destination_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Destination_Domain"/>
                        </ns12:Destination_Domain>
                        <ns12:Transaction_Type>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Transaction_Type"/>
                        </ns12:Transaction_Type>
                        <ns12:TimeStamp>
                            <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                        </ns12:TimeStamp>
                    </ns12:Header>
                    <ns12:Body>
                        <ns12:ErrorManagementSchema>
                            <ns12:inrtn_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/MIG_ERR_INTEGRATION_ID"/>
                            </ns12:inrtn_id>
                            <ns12:inrtn_instn_nm>
                                <xsl:value-of select="BW:getCurrentProcessName($_processContext/ns1:ProcessContext/ProcessId)"/>
                            </ns12:inrtn_instn_nm>
                            <ns12:inrtn_err_rtn_desc>
                                <xsl:value-of select="concat(&#xA;'Message Code: ',$_error/ns1:ErrorReport/MsgCode,&quot;&#xA;&quot;,&#xA;'Error Message: ',$_error/ns1:ErrorReport/Msg,$count,&quot;&#xA;&quot;,&#xA;'Error Class: ',$_error/ns1:ErrorReport/Class,&quot;&#xA;&quot;,&#xA;tib:render-xml($_error/ns1:ErrorReport/Data),&quot;&#xA;&quot;,&quot;&#xA;&quot;,&#xA;'STACKTRACE: ',$_error/ns1:ErrorReport/StackTrace,&quot;&#xA;&quot;&#xA;)"/>
                            </ns12:inrtn_err_rtn_desc>
                            <ns12:inrtn_msg_body>
                                <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                            </ns12:inrtn_msg_body>
                            <ns12:cre8_ts>
                                <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                            </ns12:cre8_ts>
                            <ns12:u_code>
                                <xsl:value-of select="concat($_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERROR_CODE_TECHNICAL,'-', $_error/ns1:ErrorReport/MsgCode)"/>
                            </ns12:u_code>
                            <ns12:sev_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERR_SEV_HIGH"/>
                            </ns12:sev_id>
                        </ns12:ErrorManagementSchema>
                    </ns12:Body>
                </ns12:MSG_Container>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:group name="Group">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>115</pd:x>
        <pd:y>385</pd:y>
        <pd:width>323</pd:width>
        <pd:height>338</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>errorLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:indexSlot>count</pd:indexSlot>
            <pd:errorCondition>$count &gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:errorCondition>
            <pd:suspendAfterErrorRetry>true</pd:suspendAfterErrorRetry>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>JDBC-Query</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep</pd:from>
            <pd:to>Generate Error</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>otherwise</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query</pd:from>
            <pd:to>Sleep</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>error</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep</pd:from>
            <pd:to>Error Process</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$count&gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>Error Process</pd:from>
            <pd:to>Generate Error</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="Generate Error">
            <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
            <pd:resourceType>ae.activities.throw</pd:resourceType>
            <pd:x>356</pd:x>
            <pd:y>559</pd:y>
            <config>
                <faultName/>
            </config>
            <pd:inputBindings>
                <ns0:ActivityInput>
                    <message>
                        <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                    </message>
                    <xsl:if test="$_error/ns1:ErrorReport/MsgCode">
                        <messageCode>
                            <xsl:value-of select="$_error/ns1:ErrorReport/MsgCode"/>
                        </messageCode>
                    </xsl:if>
                </ns0:ActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Sleep">
            <pd:type>com.tibco.plugin.timer.SleepActivity</pd:type>
            <pd:resourceType>ae.activities.sleep</pd:resourceType>
            <pd:x>198</pd:x>
            <pd:y>557</pd:y>
            <config/>
            <pd:inputBindings>
                <ns2:SleepInputSchema>
                    <IntervalInMillisec>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_RETRY_DELAY"/>
                    </IntervalInMillisec>
                </ns2:SleepInputSchema>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="JDBC-Query">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>193</pd:x>
            <pd:y>446</pd:y>
            <config>
                <timeout>%%Connections/Database/PMM/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>%%Connections/Database/PMM/GLB_MAX_ROWS%%</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>select pmg_po_number, pmg_style_ind, spp_set_parent
from pmm.pmgdtlee
where pmg_po_number = ?</statement>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>pmg_po_number</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/PMM JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <wizardData/>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>PMG_PO_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>2</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_STYLE_IND</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>1</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>char</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>SPP_SET_PARENT</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>2</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>number</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <pmg_po_number>
                        <xsl:value-of select="$Start/root/PMG_PO_NUMBER"/>
                    </pmg_po_number>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Error Process">
            <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
            <pd:resourceType>ae.process.subprocess</pd:resourceType>
            <pd:x>277</pd:x>
            <pd:y>661</pd:y>
            <config>
                <processName>/Utility Services/Exception Handling/ErrorProcess.process</processName>
            </config>
            <pd:inputBindings>
                <ns12:MSG_Container>
                    <ns12:Header>
                        <ns12:ProjectName>
                            <xsl:value-of select="$_processContext/ns1:ProcessContext/ProjectName"/>
                        </ns12:ProjectName>
                        <ns12:Source_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Source_Domain"/>
                        </ns12:Source_Domain>
                        <ns12:Destination_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Destination_Domain"/>
                        </ns12:Destination_Domain>
                        <ns12:Transaction_Type>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Transaction_Type"/>
                        </ns12:Transaction_Type>
                        <ns12:TimeStamp>
                            <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                        </ns12:TimeStamp>
                    </ns12:Header>
                    <ns12:Body>
                        <ns12:ErrorManagementSchema>
                            <ns12:inrtn_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/MIG_ERR_INTEGRATION_ID"/>
                            </ns12:inrtn_id>
                            <ns12:inrtn_instn_nm>
                                <xsl:value-of select="BW:getCurrentProcessName($_processContext/ns1:ProcessContext/ProcessId)"/>
                            </ns12:inrtn_instn_nm>
                            <ns12:inrtn_err_rtn_desc>
                                <xsl:value-of select="concat(&#xA;'Message Code: ',$_error/ns1:ErrorReport/MsgCode,&quot;&#xA;&quot;,&#xA;'Error Message: ',$_error/ns1:ErrorReport/Msg,$count,&quot;&#xA;&quot;,&#xA;'Error Class: ',$_error/ns1:ErrorReport/Class,&quot;&#xA;&quot;,&#xA;tib:render-xml($_error/ns1:ErrorReport/Data),&quot;&#xA;&quot;,&quot;&#xA;&quot;,&#xA;'STACKTRACE: ',$_error/ns1:ErrorReport/StackTrace,&quot;&#xA;&quot;&#xA;)"/>
                            </ns12:inrtn_err_rtn_desc>
                            <ns12:inrtn_msg_body>
                                <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                            </ns12:inrtn_msg_body>
                            <ns12:cre8_ts>
                                <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                            </ns12:cre8_ts>
                            <ns12:u_code>
                                <xsl:value-of select="concat($_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERROR_CODE_TECHNICAL,'-', $_error/ns1:ErrorReport/MsgCode)"/>
                            </ns12:u_code>
                            <ns12:sev_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERR_SEV_HIGH"/>
                            </ns12:sev_id>
                        </ns12:ErrorManagementSchema>
                    </ns12:Body>
                </ns12:MSG_Container>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:activity name="Null">
        <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
        <pd:resourceType>ae.activities.null</pd:resourceType>
        <pd:x>517</pd:x>
        <pd:y>561</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:group name="Group (2)">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>686</pd:x>
        <pd:y>43</pd:y>
        <pd:width>347</pd:width>
        <pd:height>321</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>errorLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:indexSlot>count4</pd:indexSlot>
            <pd:errorCondition>$count4 &gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:errorCondition>
            <pd:suspendAfterErrorRetry>true</pd:suspendAfterErrorRetry>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>JDBC-Query-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query-1</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query-1</pd:from>
            <pd:to>Sleep-3</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-65536</pd:lineColor>
            <pd:conditionType>error</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep-3</pd:from>
            <pd:to>Generate-Error-3</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>otherwise</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep-3</pd:from>
            <pd:to>Error Process-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$count&gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>Error Process-1</pd:from>
            <pd:to>Generate-Error-3</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="Sleep-3">
            <pd:type>com.tibco.plugin.timer.SleepActivity</pd:type>
            <pd:resourceType>ae.activities.sleep</pd:resourceType>
            <pd:x>768</pd:x>
            <pd:y>216</pd:y>
            <config/>
            <pd:inputBindings>
                <ns2:SleepInputSchema>
                    <IntervalInMillisec>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_RETRY_DELAY"/>
                    </IntervalInMillisec>
                </ns2:SleepInputSchema>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Generate-Error-3">
            <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
            <pd:resourceType>ae.activities.throw</pd:resourceType>
            <pd:x>937</pd:x>
            <pd:y>215</pd:y>
            <config>
                <faultName/>
            </config>
            <pd:inputBindings>
                <ns0:ActivityInput>
                    <message>
                        <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                    </message>
                    <xsl:if test="$_error/ns1:ErrorReport/MsgCode">
                        <messageCode>
                            <xsl:value-of select="$_error/ns1:ErrorReport/MsgCode"/>
                        </messageCode>
                    </xsl:if>
                </ns0:ActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="JDBC-Query-1">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>765</pd:x>
            <pd:y>108</pd:y>
            <config>
                <timeout>%%Connections/Database/PMM/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>%%Connections/Database/PMM/GLB_MAX_ROWS%%</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>SELECT
       TRIM(B.prd_lvl_number) prd_lvl_number,
       TRIM(C.org_lvl_number) org_lvl_number,
       TRIM(A.PMG_SELL_QTY) PMG_SELL_QTY,
       TRIM(
              (SELECT NVL(vpc_buy_multiple,1)
               FROM pmm.vpcprdee
               WHERE vpc_prd_tech_key=D.vpc_prd_tech_key)) SLL_UNITS_PER_INNER,
       TRIM(D.PMG_PO_NUMBER) PMG_PO_NUMBER,
       TRIM(to_char(E.PMG_RELEASE_DATE, 'yyyy-mm-dd hh24:mi:ss')) PMG_RELEASE_DATE,

  (SELECT TRIM(SEG.PRD_LVL_NUMBER) Segmento
   FROM pmm.prdmstee VARI
   INNER JOIN pmm.prdmstee ESTI ON VARI.PRD_LVL_PARENT = ESTI.PRD_LVL_CHILD
   INNER JOIN pmm.prdmstee SEG ON ESTI.PRD_LVL_PARENT = SEG.PRD_LVL_CHILD
   WHERE VARI.PRD_LVL_ID = 0
     AND VARI.PRD_LVL_NUMBER = B.prd_lvl_number
   UNION SELECT TRIM(SEG.PRD_LVL_NUMBER) Segmento
   FROM pmm.prdmstee ART
   INNER JOIN pmm.prdmstee SEG ON ART.PRD_LVL_PARENT = SEG.PRD_LVL_CHILD
   WHERE ART.PRD_LVL_ID = 1
     AND ART.PRD_LVL_NUMBER = B.prd_lvl_number) AS SEGMENTO
FROM pmm.PMGALLEE A
INNER JOIN PMM.PRDMSTEE B ON A.Prd_lvl_child = B.prd_lvl_child
INNER JOIN pmm.ORGMSTEE C ON A.org_lvl_child = C.org_lvl_child
INNER JOIN pmm.pmgdtlee D ON a.PMG_DTL_TECH_KEY = D.PMG_DTL_TECH_KEY
INNER JOIN pmm.pmghdree E ON D.pmg_po_number = E.pmg_po_number
WHERE D.pmg_po_number = ?
  AND A.PRD_Style_Ind IS NULL
  AND D.pmg_style_ind ='T'
  AND D.spp_set_parent IS NULL
  AND a.pmg_sell_qty &gt;0</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/PMM JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <wizardData/>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>PMG_PO_NUMBER</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>PRD_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ORG_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_SELL_QTY</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>SLL_UNITS_PER_INNER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_PO_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_RELEASE_DATE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>SEGMENTO</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <PMG_PO_NUMBER>
                        <xsl:value-of select="$Start/root/PMG_PO_NUMBER"/>
                    </PMG_PO_NUMBER>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Error Process-1">
            <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
            <pd:resourceType>ae.process.subprocess</pd:resourceType>
            <pd:x>860</pd:x>
            <pd:y>305</pd:y>
            <config>
                <processName>/Utility Services/Exception Handling/ErrorProcess.process</processName>
            </config>
            <pd:inputBindings>
                <ns12:MSG_Container>
                    <ns12:Header>
                        <ns12:ProjectName>
                            <xsl:value-of select="$_processContext/ns1:ProcessContext/ProjectName"/>
                        </ns12:ProjectName>
                        <ns12:Source_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Source_Domain"/>
                        </ns12:Source_Domain>
                        <ns12:Destination_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Destination_Domain"/>
                        </ns12:Destination_Domain>
                        <ns12:Transaction_Type>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Transaction_Type"/>
                        </ns12:Transaction_Type>
                        <ns12:TimeStamp>
                            <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                        </ns12:TimeStamp>
                    </ns12:Header>
                    <ns12:Body>
                        <ns12:ErrorManagementSchema>
                            <ns12:inrtn_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/MIG_ERR_INTEGRATION_ID"/>
                            </ns12:inrtn_id>
                            <ns12:inrtn_instn_nm>
                                <xsl:value-of select="BW:getCurrentProcessName($_processContext/ns1:ProcessContext/ProcessId)"/>
                            </ns12:inrtn_instn_nm>
                            <ns12:inrtn_err_rtn_desc>
                                <xsl:value-of select="concat(&#xA;'Message Code: ',$_error/ns1:ErrorReport/MsgCode,&quot;&#xA;&quot;,&#xA;'Error Message: ',$_error/ns1:ErrorReport/Msg,$count,&quot;&#xA;&quot;,&#xA;'Error Class: ',$_error/ns1:ErrorReport/Class,&quot;&#xA;&quot;,&#xA;tib:render-xml($_error/ns1:ErrorReport/Data),&quot;&#xA;&quot;,&quot;&#xA;&quot;,&#xA;'STACKTRACE: ',$_error/ns1:ErrorReport/StackTrace,&quot;&#xA;&quot;&#xA;)"/>
                            </ns12:inrtn_err_rtn_desc>
                            <ns12:inrtn_msg_body>
                                <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                            </ns12:inrtn_msg_body>
                            <ns12:cre8_ts>
                                <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                            </ns12:cre8_ts>
                            <ns12:u_code>
                                <xsl:value-of select="concat($_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERROR_CODE_TECHNICAL,'-', $_error/ns1:ErrorReport/MsgCode)"/>
                            </ns12:u_code>
                            <ns12:sev_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERR_SEV_HIGH"/>
                            </ns12:sev_id>
                        </ns12:ErrorManagementSchema>
                    </ns12:Body>
                </ns12:MSG_Container>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:group name="Group (3)">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>691</pd:x>
        <pd:y>738</pd:y>
        <pd:width>343</pd:width>
        <pd:height>356</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>errorLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:indexSlot>count3</pd:indexSlot>
            <pd:errorCondition>$count3 &gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:errorCondition>
            <pd:suspendAfterErrorRetry>true</pd:suspendAfterErrorRetry>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>JDBC-Query-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query-2</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>JDBC-Query-2</pd:from>
            <pd:to>Sleep-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-65536</pd:lineColor>
            <pd:conditionType>error</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep-2</pd:from>
            <pd:to>Generate-Error-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Sleep-2</pd:from>
            <pd:to>Error Process-3</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$count&gt;=$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_MAX_RETRIES</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>Error Process-3</pd:from>
            <pd:to>Generate-Error-2</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>otherwise</pd:conditionType>
        </pd:transition>
        <pd:activity name="Generate-Error-2">
            <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
            <pd:resourceType>ae.activities.throw</pd:resourceType>
            <pd:x>935</pd:x>
            <pd:y>906</pd:y>
            <config>
                <faultName/>
            </config>
            <pd:inputBindings>
                <ns0:ActivityInput>
                    <message>
                        <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                    </message>
                    <xsl:if test="$_error/ns1:ErrorReport/MsgCode">
                        <messageCode>
                            <xsl:value-of select="$_error/ns1:ErrorReport/MsgCode"/>
                        </messageCode>
                    </xsl:if>
                </ns0:ActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Sleep-2">
            <pd:type>com.tibco.plugin.timer.SleepActivity</pd:type>
            <pd:resourceType>ae.activities.sleep</pd:resourceType>
            <pd:x>789</pd:x>
            <pd:y>906</pd:y>
            <config/>
            <pd:inputBindings>
                <ns2:SleepInputSchema>
                    <IntervalInMillisec>
                        <xsl:value-of select="$_globalVariables/ns:GlobalVariables/RetryConfig/GBL_RETRY_DELAY"/>
                    </IntervalInMillisec>
                </ns2:SleepInputSchema>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="JDBC-Query-2">
            <pd:type>com.tibco.plugin.jdbc.JDBCQueryActivity</pd:type>
            <pd:resourceType>ae.activities.JDBCQueryActivity</pd:resourceType>
            <pd:x>787</pd:x>
            <pd:y>799</pd:y>
            <config>
                <timeout>%%Connections/Database/PMM/GLB_TIMEOUT%%</timeout>
                <commit>false</commit>
                <maxRows>%%Connections/Database/PMM/GLB_MAX_ROWS%%</maxRows>
                <emptyStrAsNil>false</emptyStrAsNil>
                <statement>Select TRIM(B.prd_lvl_number) prd_lvl_number,
TRIM(C.org_lvl_number) org_lvl_number,
TRIM(A.PMG_SELL_QTY) PMG_SELL_QTY, TRIM(D.SLL_UNITS_PER_INNER) SLL_UNITS_PER_INNER,
TRIM(D.PMG_PO_NUMBER) PMG_PO_NUMBER,
TRIM(to_char(E.PMG_RELEASE_DATE, 'yyyy-mm-dd hh24:mi:ss')) PMG_RELEASE_DATE,
(select TRIM(SEG.PRD_LVL_NUMBER) Segmento
from pmm.prdmstee VARI
inner join pmm.prdmstee ESTI
on VARI.PRD_LVL_PARENT = ESTI.PRD_LVL_CHILD
inner join pmm.prdmstee SEG
on ESTI.PRD_LVL_PARENT = SEG.PRD_LVL_CHILD
where VARI.PRD_LVL_ID = 0
AND VARI.PRD_LVL_NUMBER = B.prd_lvl_number
union 
select TRIM(SEG.PRD_LVL_NUMBER) Segmento
from pmm.prdmstee ART
inner join pmm.prdmstee SEG
on ART.PRD_LVL_PARENT = SEG.PRD_LVL_CHILD
where ART.PRD_LVL_ID = 1
AND ART.PRD_LVL_NUMBER = B.prd_lvl_number) as SEGMENTO
from pmm.PMGALLEE A
inner join pmm.ORGMSTEE C on A.org_lvl_child = C.org_lvl_child
left join pmm.pmgdtlee D on a.PMG_DTL_TECH_KEY = D.PMG_DTL_TECH_KEY
inner join PMM.PRDMSTEE B on D.spp_set_parent = B.prd_lvl_child
inner join pmm.pmghdree E on D.pmg_po_number = E.pmg_po_number
where D.pmg_po_number = ?
and A.PRD_Style_Ind is not null
and D.pmg_style_ind ='T'
and D.spp_set_parent is not null
and a.pmg_sell_qty &gt;0</statement>
                <jdbcSharedConfig>/Shared Resources/Connections/Database/PMM JDBC Connection.sharedjdbc</jdbcSharedConfig>
                <wizardData/>
                <Prepared_Param_DataType>
                    <parameter>
                        <parameterName>PMG_PO_NUMBER</parameterName>
                        <dataType>VARCHAR</dataType>
                    </parameter>
                </Prepared_Param_DataType>
                <oraObjects/>
                <oraTables/>
                <QueryOutputCachedSchemaColumns>PRD_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>ORG_LVL_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_SELL_QTY</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>SLL_UNITS_PER_INNER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_PO_NUMBER</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>PMG_RELEASE_DATE</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>varchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
                <QueryOutputCachedSchemaColumns>SEGMENTO</QueryOutputCachedSchemaColumns>
                <QueryOutputCachedSchemaDataTypes>12</QueryOutputCachedSchemaDataTypes>
                <QueryOutputCachedSchemaDataTypesName>nvarchar2</QueryOutputCachedSchemaDataTypesName>
                <QueryOutputCachedSchemaStatus>OptionalElement</QueryOutputCachedSchemaStatus>
            </config>
            <pd:inputBindings>
                <jdbcQueryActivityInput>
                    <PMG_PO_NUMBER>
                        <xsl:value-of select="$Start/root/PMG_PO_NUMBER"/>
                    </PMG_PO_NUMBER>
                </jdbcQueryActivityInput>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Error Process-3">
            <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
            <pd:resourceType>ae.process.subprocess</pd:resourceType>
            <pd:x>867</pd:x>
            <pd:y>1018</pd:y>
            <config>
                <processName>/Utility Services/Exception Handling/ErrorProcess.process</processName>
            </config>
            <pd:inputBindings>
                <ns12:MSG_Container>
                    <ns12:Header>
                        <ns12:ProjectName>
                            <xsl:value-of select="$_processContext/ns1:ProcessContext/ProjectName"/>
                        </ns12:ProjectName>
                        <ns12:Source_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Source_Domain"/>
                        </ns12:Source_Domain>
                        <ns12:Destination_Domain>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Destination_Domain"/>
                        </ns12:Destination_Domain>
                        <ns12:Transaction_Type>
                            <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ProjectConfig/Transaction_Type"/>
                        </ns12:Transaction_Type>
                        <ns12:TimeStamp>
                            <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                        </ns12:TimeStamp>
                    </ns12:Header>
                    <ns12:Body>
                        <ns12:ErrorManagementSchema>
                            <ns12:inrtn_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/MIG_ERR_INTEGRATION_ID"/>
                            </ns12:inrtn_id>
                            <ns12:inrtn_instn_nm>
                                <xsl:value-of select="BW:getCurrentProcessName($_processContext/ns1:ProcessContext/ProcessId)"/>
                            </ns12:inrtn_instn_nm>
                            <ns12:inrtn_err_rtn_desc>
                                <xsl:value-of select="concat(&#xA;'Message Code: ',$_error/ns1:ErrorReport/MsgCode,&quot;&#xA;&quot;,&#xA;'Error Message: ',$_error/ns1:ErrorReport/Msg,$count,&quot;&#xA;&quot;,&#xA;'Error Class: ',$_error/ns1:ErrorReport/Class,&quot;&#xA;&quot;,&#xA;tib:render-xml($_error/ns1:ErrorReport/Data),&quot;&#xA;&quot;,&quot;&#xA;&quot;,&#xA;'STACKTRACE: ',$_error/ns1:ErrorReport/StackTrace,&quot;&#xA;&quot;&#xA;)"/>
                            </ns12:inrtn_err_rtn_desc>
                            <ns12:inrtn_msg_body>
                                <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                            </ns12:inrtn_msg_body>
                            <ns12:cre8_ts>
                                <xsl:value-of select="tib:format-dateTime('yyyy-MM-dd HH:mm:ss', current-dateTime())"/>
                            </ns12:cre8_ts>
                            <ns12:u_code>
                                <xsl:value-of select="concat($_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERROR_CODE_TECHNICAL,'-', $_error/ns1:ErrorReport/MsgCode)"/>
                            </ns12:u_code>
                            <ns12:sev_id>
                                <xsl:value-of select="$_globalVariables/ns:GlobalVariables/ExceptionHandling/GLB_ERR_SEV_HIGH"/>
                            </ns12:sev_id>
                        </ns12:ErrorManagementSchema>
                    </ns12:Body>
                </ns12:MSG_Container>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:activity name="Assign">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>1148</pd:x>
        <pd:y>262</pd:y>
        <config>
            <variableName>Variable0</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <flag_type>
                    <xsl:value-of select="2"/>
                </flag_type>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Assign-1">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>1162</pd:x>
        <pd:y>886</pd:y>
        <config>
            <variableName>Variable2</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <flag_type>
                    <xsl:value-of select="3"/>
                </flag_type>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Assign-2">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>1104</pd:x>
        <pd:y>559</pd:y>
        <config>
            <variableName>Variable1</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <flag_type>
                    <xsl:value-of select="1"/>
                </flag_type>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:group name="Group (5)">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>1293</pd:x>
        <pd:y>442</pd:y>
        <pd:width>235</pd:width>
        <pd:height>225</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>repeat</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:indexSlot>indexArray</pd:indexSlot>
            <pd:outSlot>Records</pd:outSlot>
            <pd:activityOutputName>Map-Data</pd:activityOutputName>
            <pd:repeatCondition>$indexArray=3</pd:repeatCondition>
            <pd:accumulateOutput>true</pd:accumulateOutput>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Null-3</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>otherwise</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Map-Data</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>($Variable0/root/flag_type=2 and $indexArray=1)or($Variable1/root/flag_type=1 and $indexArray=2)or($Variable2/root/flag_type=3 and $indexArray=3)</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>Null-3</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Map-Data</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="Null-3">
            <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
            <pd:resourceType>ae.activities.null</pd:resourceType>
            <pd:x>1409</pd:x>
            <pd:y>600</pd:y>
            <config/>
            <pd:inputBindings/>
        </pd:activity>
        <pd:activity name="Map-Data">
            <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
            <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
            <pd:x>1397</pd:x>
            <pd:y>518</pd:y>
            <config>
                <element>
                    <xsd:element name="group">
                        <xsd:complexType>
                            <xsd:sequence>
                                <xsd:element name="ITEM" minOccurs="0" maxOccurs="unbounded">
                                    <xsd:complexType>
                                        <xsd:sequence>
                                            <xsd:element name="PRD_LVL_NUMBER" type="xsd:string" minOccurs="0"/>
                                            <xsd:element name="ORG_LVL_NUMBER" type="xsd:string" minOccurs="0"/>
                                            <xsd:element name="PMG_SELL_QTY" type="xsd:string" minOccurs="0"/>
                                            <xsd:element name="SLL_UNITS_PER_INNER" type="xsd:string" minOccurs="0"/>
                                            <xsd:element name="PMG_PO_NUMBER" type="xsd:string" minOccurs="0"/>
                                            <xsd:element name="PMG_RELEASE_DATE" type="xsd:string" minOccurs="0"/>
                                            <xsd:element name="SEGMENTO" type="xsd:string"/>
                                        </xsd:sequence>
                                    </xsd:complexType>
                                </xsd:element>
                            </xsd:sequence>
                        </xsd:complexType>
                    </xsd:element>
                </element>
            </config>
            <pd:inputBindings>
                <group>
                    <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="if(count($JDBC-Query-1/resultSet/Record)>0 and $Variable0/root/flag_type=2and $indexArray=1) then ($JDBC-Query-1/resultSet/Record) else (if(count($JDBC-Query-Detail-1/resultSet/Record)>0 and $Variable1/root/flag_type=1and $indexArray=2) then ($JDBC-Query-Detail-1/resultSet/Record) else ($JDBC-Query-2/resultSet/Record))">
                        <ITEM>
                            <xsl:if test="PRD_LVL_NUMBER">
                                <PRD_LVL_NUMBER>
                                    <xsl:value-of select="PRD_LVL_NUMBER"/>
                                </PRD_LVL_NUMBER>
                            </xsl:if>
                            <xsl:if test="ORG_LVL_NUMBER">
                                <ORG_LVL_NUMBER>
                                    <xsl:value-of select="ORG_LVL_NUMBER"/>
                                </ORG_LVL_NUMBER>
                            </xsl:if>
                            <xsl:if test="PMG_SELL_QTY">
                                <PMG_SELL_QTY>
                                    <xsl:value-of select="PMG_SELL_QTY"/>
                                </PMG_SELL_QTY>
                            </xsl:if>
                            <xsl:if test="SLL_UNITS_PER_INNER">
                                <SLL_UNITS_PER_INNER>
                                    <xsl:value-of select="SLL_UNITS_PER_INNER"/>
                                </SLL_UNITS_PER_INNER>
                            </xsl:if>
                            <xsl:if test="PMG_PO_NUMBER">
                                <PMG_PO_NUMBER>
                                    <xsl:value-of select="PMG_PO_NUMBER"/>
                                </PMG_PO_NUMBER>
                            </xsl:if>
                            <xsl:if test="PMG_RELEASE_DATE">
                                <PMG_RELEASE_DATE>
                                    <xsl:value-of select="PMG_RELEASE_DATE"/>
                                </PMG_RELEASE_DATE>
                            </xsl:if>
                            <SEGMENTO>
                                <xsl:value-of select="substring(tib:trim(SEGMENTO), 2, 3)"/>
                            </SEGMENTO>
                        </ITEM>
                    </xsl:for-each>
                </group>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:activity name="Null-4">
        <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
        <pd:resourceType>ae.activities.null</pd:resourceType>
        <pd:x>1209</pd:x>
        <pd:y>559</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Assign-3">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>598</pd:x>
        <pd:y>211</pd:y>
        <config>
            <variableName>Variable0</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <flag_type>
                    <xsl:value-of select="0"/>
                </flag_type>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Assign-4">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>625</pd:x>
        <pd:y>561</pd:y>
        <config>
            <variableName>Variable1</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <flag_type>
                    <xsl:value-of select="0"/>
                </flag_type>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Assign-5">
        <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
        <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
        <pd:x>579</pd:x>
        <pd:y>924</pd:y>
        <config>
            <variableName>Variable2</variableName>
        </config>
        <pd:inputBindings>
            <root>
                <flag_type>
                    <xsl:value-of select="0"/>
                </flag_type>
            </root>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Group (1)</pd:from>
        <pd:to>Assign-2</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>Group</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (3)</pd:from>
        <pd:to>Assign-1</pd:to>
        <pd:lineType>Curved</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (2)</pd:from>
        <pd:to>Assign</pd:to>
        <pd:lineType>Curved</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign-2</pd:from>
        <pd:to>Null-4</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign</pd:from>
        <pd:to>Null-4</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign-1</pd:from>
        <pd:to>Null-4</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>Null</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (5)</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-4</pd:from>
        <pd:to>Group (5)</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null</pd:from>
        <pd:to>Assign-4</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>count(for $order in $JDBC-Query/resultSet/Record[PMG_STYLE_IND='F'] return $order)&gt;0</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign-4</pd:from>
        <pd:to>Group (1)</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null</pd:from>
        <pd:to>Assign-3</pd:to>
        <pd:xpathDescription>Curva Variable</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>sum(for $order in $JDBC-Query/resultSet/Record[PMG_STYLE_IND='T'] return (if(string-length($order/SPP_SET_PARENT)=0) then 1 else 0))&gt;0</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign-3</pd:from>
        <pd:to>Group (2)</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null</pd:from>
        <pd:to>Assign-5</pd:to>
        <pd:xpathDescription>Curva Fija</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>count(for $order in $JDBC-Query/resultSet/Record[PMG_STYLE_IND='T' and SPP_SET_PARENT!=0] return $order)&gt;0</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Assign-5</pd:from>
        <pd:to>Group (3)</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>