<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ns="http://www.tibco.com/namespaces/tnt/plugins/jms" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:pfx="http://xmlns.heb.com/ei/PURCHASEORDER_INFORMATION_COMPLETED" xmlns:ns0="http://www.tibco.com/schemas/MapeoVendor/Shared Resources/Schema Definitions/Custom/INPUT_FIELDS.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns1="http://www.tibco.com/pe/EngineTypes" xmlns:ns2="http://www.tibco.com/pe/GenerateErrorActivity/InputSchema">
    <xsd:import namespace="http://xmlns.heb.com/ei/PURCHASEORDER_INFORMATION_COMPLETED" schemaLocation="/Shared Resources/Schema Definitions/Custom/PURCHASEORDER_INFORMATION_COMPLETED_SOAP.xsd"/>
    <pd:name>Project Name Processes/Main Process/PurchseOrder_Demand_Main.process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startType ref="pfx:PURCHASE_ORDER"/>
    <pd:startX>50</pd:startX>
    <pd:startY>174</pd:startY>
    <pd:returnBindings>
        <group>
            <validation_status>
                <xsl:value-of select="if($Variable1/root/param=1 or $Validator_Main-1/group/status='ERROR' or $Validator_Main-2/group/status='ERROR') then 'ERROR' else 'SUCCESS'"/>
            </validation_status>
        </group>
    </pd:returnBindings>
    <pd:endName>End</pd:endName>
    <pd:endType>
        <xsd:element name="group">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="validation_status" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>
    </pd:endType>
    <pd:endX>1434</pd:endX>
    <pd:endY>404</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables>
        <Variable1>
            <xsd:element name="root">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="param" type="xsd:int"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </Variable1>
        <Variable0>
            <xsd:element name="group">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="MSG_OUT" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </Variable0>
        <Variable>
            <xsd:element name="STORE">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="value" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </Variable>
        <DETAILS>
            <xsd:element name="Details">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="value" type="xsd:string"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </DETAILS>
    </pd:processVariables>
    <pd:targetNamespace>http://xmlns.example.com/1373492283896</pd:targetNamespace>
    <pd:activity name="JMSQueueSender_PO_91">
        <pd:type>com.tibco.plugin.jms.JMSQueueSendActivity</pd:type>
        <pd:resourceType>ae.activities.JMSQueueSendActivity</pd:resourceType>
        <pd:x>1190</pd:x>
        <pd:y>489</pd:y>
        <config>
            <PermittedMessageType>Text</PermittedMessageType>
            <SessionAttributes>
                <transacted>false</transacted>
                <acknowledgeMode>1</acknowledgeMode>
                <maxSessions>1</maxSessions>
                <destination>%%Destinations/Queues/GLB_MXRSC_7901_OUTBOUND_QUEUE%%</destination>
            </SessionAttributes>
            <ConfigurableHeaders>
                <JMSDeliveryMode>PERSISTENT</JMSDeliveryMode>
                <JMSExpiration>0</JMSExpiration>
                <JMSPriority>4</JMSPriority>
            </ConfigurableHeaders>
            <ConnectionReference>/Shared Resources/Connections/JMS/JMS Connection.sharedjmscon</ConnectionReference>
        </config>
        <pd:inputBindings>
            <ns:ActivityInput>
                <Body>
                    <xsl:value-of select="concat(concat(tib:pad('EXceed 2000',19,' '),'|',&#xA;tib:pad('Purchase Order 1.0',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|'),  &quot;&#xA;&quot;,$Render-Data/Text, &quot;&#xA;&quot;,$Variable0/group/MSG_OUT)"/>
                </Body>
            </ns:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="JMSQueueSender_PO_90">
        <pd:type>com.tibco.plugin.jms.JMSQueueSendActivity</pd:type>
        <pd:resourceType>ae.activities.JMSQueueSendActivity</pd:resourceType>
        <pd:x>1179</pd:x>
        <pd:y>318</pd:y>
        <config>
            <PermittedMessageType>Text</PermittedMessageType>
            <SessionAttributes>
                <transacted>false</transacted>
                <acknowledgeMode>1</acknowledgeMode>
                <maxSessions>1</maxSessions>
                <destination>%%Destinations/Queues/GLB_MXRSC_9701_OUTBOUND_QUEUE%%</destination>
            </SessionAttributes>
            <ConfigurableHeaders>
                <JMSDeliveryMode>PERSISTENT</JMSDeliveryMode>
                <JMSExpiration>0</JMSExpiration>
                <JMSPriority>4</JMSPriority>
            </ConfigurableHeaders>
            <ConnectionReference>/Shared Resources/Connections/JMS/JMS Connection.sharedjmscon</ConnectionReference>
        </config>
        <pd:inputBindings>
            <ns:ActivityInput>
                <Body>
                    <xsl:value-of select="concat(concat(tib:pad('EXceed 2000',19,' '),'|',&#xA;tib:pad('Purchase Order 1.0',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|'),  &quot;&#xA;&quot;,$Render-Data/Text, &quot;&#xA;&quot;,$Variable0/group/MSG_OUT)"/>
                </Body>
            </ns:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Render Data">
        <pd:type>com.tibco.plugin.parse.RenderActivity</pd:type>
        <pd:resourceType>ae.activities.RenderActivity</pd:resourceType>
        <pd:x>489</pd:x>
        <pd:y>177</pd:y>
        <config>
            <ParseSharedConfig>/Shared Resources/Data Format/PO Header Format.sharedparse</ParseSharedConfig>
        </config>
        <pd:inputBindings>
            <Rows>
                <HEADER>
                    <Record-Indicator>
                        <xsl:value-of select="'H'"/>
                    </Record-Indicator>
                    <Distribution-Center>
                        <xsl:value-of select="if($Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9071) then 90 else 91"/>
                    </Distribution-Center>
                    <Purchase-Order>
                        <xsl:value-of select="$Start/pfx:PURCHASE_ORDER/pfx:PMG_PO_NUMBER"/>
                    </Purchase-Order>
                    <Action-Code>
                        <xsl:value-of select="if ($Start/pfx:PURCHASE_ORDER/pfx:PMG_STAT_CODE=4)&#xA;then 'A' else 'C'"/>
                    </Action-Code>
                    <Ship-To-Warehouse>
                        <xsl:value-of select="if($Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9071) then 71 else 1"/>
                    </Ship-To-Warehouse>
                    <Department>
                        <xsl:value-of select="'99 '"/>
                    </Department>
                    <Vendor>
                        <xsl:value-of select="tib:pad-front(tib:trim($Start/pfx:PURCHASE_ORDER/pfx:VENDOR_NUMBER), 8, '0')"/>
                    </Vendor>
                    <Buyer>
                        <xsl:value-of select="tib:pad-front($Start/pfx:PURCHASE_ORDER/pfx:USR_TECH_KEY, 3, 0)"/>
                    </Buyer>
                    <Transportation>
                        <xsl:value-of select="''"/>
                    </Transportation>
                    <Load-Type>
                        <xsl:value-of select="''"/>
                    </Load-Type>
                    <Free-On-Board-Code>
                        <xsl:value-of select="' '"/>
                    </Free-On-Board-Code>
                    <FBC-Code>
                        <xsl:value-of select="'  '"/>
                    </FBC-Code>
                    <Cancel-Date>
                        <xsl:value-of select="if (string-length($Start/pfx:PURCHASE_ORDER/pfx:PMG_CNCL_BY_DATE) = 0) then '' else tib:format-date('dd/MM/yyyy', tib:parse-date('yyyy-MM-dd HH:mm:ss', $Start/pfx:PURCHASE_ORDER/pfx:PMG_CNCL_BY_DATE))"/>
                    </Cancel-Date>
                    <Pickup-Date>
                        <xsl:value-of select="if (string-length($Start/pfx:PURCHASE_ORDER/pfx:PMG_RELEASE_DATE) = 0) then '' else tib:format-date('dd/MM/yyyy', tib:parse-date('yyyy-MM-dd HH:mm:ss', $Start/pfx:PURCHASE_ORDER/pfx:PMG_RELEASE_DATE))"/>
                    </Pickup-Date>
                    <Scheduled-Receipt-Date>
                        <xsl:value-of select="if (string-length($Start/pfx:PURCHASE_ORDER/pfx:PMG_EXP_RCT_DATE) = 0) then '' else tib:format-date('dd/MM/yyyy', tib:parse-date('yyyy-MM-dd HH:mm:ss', $Start/pfx:PURCHASE_ORDER/pfx:PMG_EXP_RCT_DATE))"/>
                    </Scheduled-Receipt-Date>
                    <Vendor-Ship-Date>
                        <xsl:value-of select="''"/>
                    </Vendor-Ship-Date>
                    <Freight-Charge-Code>
                        <xsl:value-of select="' '"/>
                    </Freight-Charge-Code>
                    <Freight-Charge-Amount>
                        <xsl:value-of select="'00000000'"/>
                    </Freight-Charge-Amount>
                    <Freight-Allowance-Code>
                        <xsl:value-of select="' '"/>
                    </Freight-Allowance-Code>
                    <Freight-Allowance-Amount>
                        <xsl:value-of select="'00000000'"/>
                    </Freight-Allowance-Amount>
                    <Freight-Terms>
                        <xsl:value-of select="'                '"/>
                    </Freight-Terms>
                    <Purchase-Order-Type>
                        <xsl:value-of select="'  '"/>
                    </Purchase-Order-Type>
                    <Purchase-Order-Type-Description>
                        <xsl:value-of select="'                '"/>
                    </Purchase-Order-Type-Description>
                    <Message-1>
                        <xsl:value-of select="translate(translate(tib:base64-to-string(tib:string-to-base64(translate($Start/pfx:PURCHASE_ORDER/pfx:PMG_RECV_NOTES,'ÑñáéíóöúüÁÉÍÓÖÚÜ', 'NnaeioouuAEIOOUU') ,'ASCII'), 'ASCII'), '#±´?\', ' n   '), &quot; &quot;,' ')"/>
                    </Message-1>
                    <Message-2>
                        <xsl:value-of select="translate(translate(tib:base64-to-string(tib:string-to-base64(translate($Start/pfx:PURCHASE_ORDER/pfx:PMG_PO_NOTES,'ÑñáéíóöúüÁÉÍÓÖÚÜ', 'NnaeioouuAEIOOUU') ,'ASCII'), 'ASCII'), '#±´?\', ' n   '), &quot; &quot;,' ')"/>
                    </Message-2>
                    <Container-Tracking>
                        <xsl:value-of select="tib:pad(tib:trim($Start/pfx:PURCHASE_ORDER/pfx:PMG_USER),70,' ')"/>
                    </Container-Tracking>
                    <Carrier>
                        <xsl:value-of select="' |'"/>
                    </Carrier>
                </HEADER>
            </Rows>
        </pd:inputBindings>
    </pd:activity>
    <pd:group name="Group">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>536</pd:x>
        <pd:y>93</pd:y>
        <pd:width>243</pd:width>
        <pd:height>140</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>inputLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:over>$Start/pfx:PURCHASE_ORDER/pfx:PURCHASE_ORDER_DETAIL/pfx:ITEM</pd:over>
            <pd:iterationElementSlot>detail</pd:iterationElementSlot>
            <pd:indexSlot>index</pd:indexSlot>
            <pd:activityOutputName/>
            <pd:accumulateOutput>false</pd:accumulateOutput>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Render-Data-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Assign</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Render-Data-1</pd:from>
            <pd:to>Assign</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:activity name="Render-Data-1">
            <pd:type>com.tibco.plugin.parse.RenderActivity</pd:type>
            <pd:resourceType>ae.activities.RenderActivity</pd:resourceType>
            <pd:x>620</pd:x>
            <pd:y>174</pd:y>
            <config>
                <ParseSharedConfig>/Shared Resources/Data Format/PO Detail Format.sharedparse</ParseSharedConfig>
            </config>
            <pd:inputBindings>
                <Rows>
                    <HEADER>
                        <Record-Indicator>
                            <xsl:value-of select="'D'"/>
                        </Record-Indicator>
                        <Distribution-Center>
                            <xsl:value-of select="if($Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9071) then 90 else 91"/>
                        </Distribution-Center>
                        <Purchase-Order>
                            <xsl:value-of select="$Start/pfx:PURCHASE_ORDER/pfx:PMG_PO_NUMBER"/>
                        </Purchase-Order>
                        <Action-Code>
                            <xsl:value-of select="if ($Start/pfx:PURCHASE_ORDER/pfx:PMG_STAT_CODE=4)&#xA;then 'A' else 'C'"/>
                        </Action-Code>
                        <Product-Number>
                            <xsl:value-of select="tib:pad(tib:trim($detail/pfx:ITEM/pfx:PRD_LVL_NUMBER), 18,'' )"/>
                        </Product-Number>
                        <Product-Selection-Warehouse>
                            <xsl:value-of select="if($Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9071) then 71 else 1"/>
                        </Product-Selection-Warehouse>
                        <Backorders-Allowed>
                            <xsl:value-of select="'N'"/>
                        </Backorders-Allowed>
                        <Net-Cost>
                            <xsl:value-of select="'000000000'"/>
                        </Net-Cost>
                        <List-Cost>
                            <xsl:value-of select="'000000000'"/>
                        </List-Cost>
                        <Cost-Adjustment-1>
                            <xsl:value-of select="'00000000000'"/>
                        </Cost-Adjustment-1>
                        <Cost-Adjustment-2>
                            <xsl:value-of select="'00000000000'"/>
                        </Cost-Adjustment-2>
                        <Cost-Adjustment-3>
                            <xsl:value-of select="'00000000000'"/>
                        </Cost-Adjustment-3>
                        <Cost-Adjustment-4>
                            <xsl:value-of select="'00000000000'"/>
                        </Cost-Adjustment-4>
                        <Cost-Adjustment-5>
                            <xsl:value-of select="'00000000000'"/>
                        </Cost-Adjustment-5>
                        <Cost-Adjustment-6>
                            <xsl:value-of select="'00000000000'"/>
                        </Cost-Adjustment-6>
                        <Cost-Adjustment-7>
                            <xsl:value-of select="'00000000000'"/>
                        </Cost-Adjustment-7>
                        <Order-Quantity>
                            <xsl:value-of select="tib:pad-front((&#xA;if(string-length($detail/pfx:ITEM/pfx:PMG_TOTAL_INNERS)=0) &#xA;then 0 &#xA;else ( round( number( $detail/pfx:ITEM/pfx:PMG_TOTAL_INNERS) div number( $detail/pfx:ITEM/pfx:VPC_BUY_MULTIPLE) )  )&#xA;), 7, 0)"/>
                        </Order-Quantity>
                        <Lot-Number>
                            <xsl:value-of select="'              '"/>
                        </Lot-Number>
                        <Retail-Units-in-a-Shipping-Case>
                            <xsl:value-of select="tib:pad-front(&#xA;round((&#xA;&#x9;if(string-length($detail/pfx:ITEM/pfx:SLL_UNITS_PER_INNER)=0) &#xA;&#x9;then 0 &#xA;&#x9;else (  number($detail/pfx:ITEM/pfx:SLL_UNITS_PER_INNER) div number($detail/pfx:ITEM/pfx:VPC_BUY_MULTIPLE) )&#xA;)), 5, 0)"/>
                        </Retail-Units-in-a-Shipping-Case>
                        <Promo-Investment-Flag>
                            <xsl:value-of select="'N'"/>
                        </Promo-Investment-Flag>
                        <Require-Costs>
                            <xsl:value-of select="' '"/>
                        </Require-Costs>
                        <unknown>
                            <xsl:value-of select="if(tib:trim($detail/pfx:ITEM/pfx:VPC_CASE_WGT_UOM)='KG')  then (concat((tib:pad-front(if($detail/pfx:ITEM/pfx:NUMBER_OF_INNERS=1)  then round(number($detail/pfx:ITEM/pfx:PMG_SELL_QTY)) else round(number($detail/pfx:ITEM/pfx:PMG_PACK_QTY)), 9, 0)),'|')) else '000000000|'"/>
                        </unknown>
                    </HEADER>
                </Rows>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Assign">
            <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
            <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
            <pd:x>699</pd:x>
            <pd:y>169</pd:y>
            <config>
                <variableName>Variable0</variableName>
            </config>
            <pd:inputBindings>
                <group>
                    <MSG_OUT>
                        <xsl:value-of select="concat($Variable0/group/MSG_OUT, $Render-Data-1/Text, &quot;&#xA;&quot;)"/>
                    </MSG_OUT>
                </group>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:group name="Group (1)">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>123</pd:x>
        <pd:y>55</pd:y>
        <pd:width>196</pd:width>
        <pd:height>227</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>inputLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:over>$Start/pfx:PURCHASE_ORDER/pfx:PURCHASE_ORDER_DETAIL/pfx:ITEM</pd:over>
            <pd:iterationElementSlot>PODetail</pd:iterationElementSlot>
            <pd:indexSlot>indexPO</pd:indexSlot>
            <pd:activityOutputName/>
            <pd:accumulateOutput>false</pd:accumulateOutput>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Validator_Main</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Validator_Main</pd:from>
            <pd:to>end</pd:to>
            <pd:xpathDescription>status=SUCCESS</pd:xpathDescription>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>xpath</pd:conditionType>
            <pd:xpath>$Validator_Main/group/status='SUCCESS'</pd:xpath>
        </pd:transition>
        <pd:transition>
            <pd:from>Assign-1</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Validator_Main</pd:from>
            <pd:to>Assign-1</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>otherwise</pd:conditionType>
        </pd:transition>
        <pd:activity name="Validator_Main">
            <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
            <pd:resourceType>ae.process.subprocess</pd:resourceType>
            <pd:x>199</pd:x>
            <pd:y>121</pd:y>
            <config>
                <processName>/Project Name Processes/Main Process/Validator_Main.process</processName>
            </config>
            <pd:inputBindings>
                <ns0:INPUT_DATA>
                    <ns0:ID>
                        <xsl:value-of select="tib:trim($PODetail/pfx:ITEM/pfx:PRD_LVL_NUMBER)"/>
                    </ns0:ID>
                    <ns0:TYPE>
                        <xsl:value-of select="'PO'"/>
                    </ns0:TYPE>
                    <ns0:HI>
                        <xsl:value-of select="''"/>
                    </ns0:HI>
                    <ns0:TI>
                        <xsl:value-of select="''"/>
                    </ns0:TI>
                    <ns0:BREAKPACKFLAG>
                        <xsl:value-of select="''"/>
                    </ns0:BREAKPACKFLAG>
                    <ns0:MANDATORYFLOWTHRUPRODUCT>
                        <xsl:value-of select="''"/>
                    </ns0:MANDATORYFLOWTHRUPRODUCT>
                    <ns0:FLOWTYPE>
                        <xsl:value-of select="''"/>
                    </ns0:FLOWTYPE>
                    <ns0:ORDERTYPE>
                        <xsl:value-of select="''"/>
                    </ns0:ORDERTYPE>
                    <ns0:UPC>
                        <xsl:value-of select="''"/>
                    </ns0:UPC>
                    <ns0:PMG_PO_NUMBER>
                        <xsl:value-of select="$PODetail/pfx:ITEM/pfx:PMG_PO_NUMBER"/>
                    </ns0:PMG_PO_NUMBER>
                    <ns0:DIST_LIST>
                        <xsl:value-of select="''"/>
                    </ns0:DIST_LIST>
                    <ns0:DMT_CODE>
                        <xsl:value-of select="''"/>
                    </ns0:DMT_CODE>
                    <ns0:FACTOREMPAQUE>
                        <xsl:value-of select="if($PODetail/pfx:ITEM/pfx:NUMBER_OF_INNERS>1) then tib:trim($PODetail/pfx:ITEM/pfx:SLL_UNITS_PER_INNER)  else tib:trim($PODetail/pfx:ITEM/pfx:VPC_CASE_QTY)"/>
                    </ns0:FACTOREMPAQUE>
                </ns0:INPUT_DATA>
            </pd:inputBindings>
        </pd:activity>
        <pd:activity name="Assign-1">
            <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
            <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
            <pd:x>200</pd:x>
            <pd:y>224</pd:y>
            <config>
                <variableName>Variable1</variableName>
            </config>
            <pd:inputBindings>
                <root>
                    <param>
                        <xsl:value-of select="1"/>
                    </param>
                </root>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:activity name="Null">
        <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
        <pd:resourceType>ae.activities.null</pd:resourceType>
        <pd:x>381</pd:x>
        <pd:y>576</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Validator_Main-1">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>384</pd:x>
        <pd:y>176</pd:y>
        <config>
            <processName>/Project Name Processes/Main Process/Validator_Main.process</processName>
        </config>
        <pd:inputBindings>
            <ns0:INPUT_DATA>
                <ns0:ID>
                    <xsl:value-of select="$Start/pfx:PURCHASE_ORDER/pfx:PMG_PO_NUMBER"/>
                </ns0:ID>
                <ns0:TYPE>
                    <xsl:value-of select="'PO_DEMAND'"/>
                </ns0:TYPE>
                <ns0:HI>
                    <xsl:value-of select="''"/>
                </ns0:HI>
                <ns0:TI>
                    <xsl:value-of select="''"/>
                </ns0:TI>
                <ns0:BREAKPACKFLAG>
                    <xsl:value-of select="''"/>
                </ns0:BREAKPACKFLAG>
                <ns0:MANDATORYFLOWTHRUPRODUCT>
                    <xsl:value-of select="''"/>
                </ns0:MANDATORYFLOWTHRUPRODUCT>
                <ns0:FLOWTYPE>
                    <xsl:value-of select="''"/>
                </ns0:FLOWTYPE>
                <ns0:ORDERTYPE>
                    <xsl:value-of select="''"/>
                </ns0:ORDERTYPE>
                <ns0:UPC>
                    <xsl:value-of select="''"/>
                </ns0:UPC>
                <ns0:PMG_PO_NUMBER>
                    <xsl:value-of select="''"/>
                </ns0:PMG_PO_NUMBER>
                <ns0:DIST_LIST>
                    <xsl:value-of select="count($Start/pfx:PURCHASE_ORDER/pfx:PURCHASE_ORDER_DISTRIBUTION/pfx:ITEM)"/>
                </ns0:DIST_LIST>
                <ns0:DMT_CODE>
                    <xsl:value-of select="tib:trim($Start/pfx:PURCHASE_ORDER/pfx:DMT_CODE)"/>
                </ns0:DMT_CODE>
                <ns0:FACTOREMPAQUE>
                    <xsl:value-of select="''"/>
                </ns0:FACTOREMPAQUE>
            </ns0:INPUT_DATA>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="getEXEData">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>975</pd:x>
        <pd:y>170</pd:y>
        <config>
            <processName>/Project Name Processes/Sub Process/getEXEData.process</processName>
        </config>
        <pd:inputBindings>
            <group>
                <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$Start/pfx:PURCHASE_ORDER/pfx:PURCHASE_ORDER_DISTRIBUTION/pfx:ITEM">
                    <ITEM>
                        <sucursal>
                            <xsl:value-of select="pfx:ORG_LVL_NUMBER"/>
                        </sucursal>
                    </ITEM>
                </xsl:for-each>
            </group>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Validator_Main-2">
        <pd:type>com.tibco.pe.core.CallProcessActivity</pd:type>
        <pd:resourceType>ae.process.subprocess</pd:resourceType>
        <pd:x>1092</pd:x>
        <pd:y>170</pd:y>
        <config>
            <processName>/Project Name Processes/Main Process/Validator_Main.process</processName>
        </config>
        <pd:inputBindings>
            <ns0:INPUT_DATA>
                <ns0:ID>
                    <xsl:value-of select="$Start/pfx:PURCHASE_ORDER/pfx:PMG_PO_NUMBER"/>
                </ns0:ID>
                <ns0:TYPE>
                    <xsl:value-of select="'DEMAND'"/>
                </ns0:TYPE>
                <ns0:HI>
                    <xsl:value-of select="''"/>
                </ns0:HI>
                <ns0:TI>
                    <xsl:value-of select="''"/>
                </ns0:TI>
                <ns0:BREAKPACKFLAG>
                    <xsl:value-of select="''"/>
                </ns0:BREAKPACKFLAG>
                <ns0:MANDATORYFLOWTHRUPRODUCT>
                    <xsl:value-of select="''"/>
                </ns0:MANDATORYFLOWTHRUPRODUCT>
                <ns0:FLOWTYPE>
                    <xsl:value-of select="''"/>
                </ns0:FLOWTYPE>
                <ns0:ORDERTYPE>
                    <xsl:value-of select="''"/>
                </ns0:ORDERTYPE>
                <ns0:UPC>
                    <xsl:value-of select="''"/>
                </ns0:UPC>
                <ns0:PMG_PO_NUMBER>
                    <xsl:value-of select="''"/>
                </ns0:PMG_PO_NUMBER>
                <ns0:DIST_LIST>
                    <xsl:value-of select="$getEXEData/group/NO_DATA_FLAG"/>
                </ns0:DIST_LIST>
                <ns0:DMT_CODE>
                    <xsl:value-of select="''"/>
                </ns0:DMT_CODE>
                <ns0:FACTOREMPAQUE>
                    <xsl:value-of select="''"/>
                </ns0:FACTOREMPAQUE>
            </ns0:INPUT_DATA>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Null-1">
        <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
        <pd:resourceType>ae.activities.null</pd:resourceType>
        <pd:x>1123</pd:x>
        <pd:y>404</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="JMSQueueSender_DEMAND_90">
        <pd:type>com.tibco.plugin.jms.JMSQueueSendActivity</pd:type>
        <pd:resourceType>ae.activities.JMSQueueSendActivity</pd:resourceType>
        <pd:x>1327</pd:x>
        <pd:y>313</pd:y>
        <config>
            <PermittedMessageType>Text</PermittedMessageType>
            <SessionAttributes>
                <transacted>false</transacted>
                <acknowledgeMode>1</acknowledgeMode>
                <maxSessions>1</maxSessions>
                <destination>%%Destinations/Queues/GLB_MXRSC_9701_OUTBOUND_QUEUE%%</destination>
            </SessionAttributes>
            <ConfigurableHeaders>
                <JMSDeliveryMode>PERSISTENT</JMSDeliveryMode>
                <JMSExpiration>0</JMSExpiration>
                <JMSPriority>4</JMSPriority>
            </ConfigurableHeaders>
            <ConnectionReference>/Shared Resources/Connections/JMS/JMS Connection.sharedjmscon</ConnectionReference>
        </config>
        <pd:inputBindings>
            <ns:ActivityInput>
                <Body>
                    <xsl:value-of select="concat(concat(tib:pad('EXceed 2000',19,' '),'|',&#xA;tib:pad('Flow Demand 1.0',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|'), &quot;&#xA;&quot;,$DETAILS/Details/value)"/>
                </Body>
            </ns:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="JMSQueueSender_DEMAND_91">
        <pd:type>com.tibco.plugin.jms.JMSQueueSendActivity</pd:type>
        <pd:resourceType>ae.activities.JMSQueueSendActivity</pd:resourceType>
        <pd:x>1335</pd:x>
        <pd:y>487</pd:y>
        <config>
            <PermittedMessageType>Text</PermittedMessageType>
            <SessionAttributes>
                <transacted>false</transacted>
                <acknowledgeMode>1</acknowledgeMode>
                <maxSessions>1</maxSessions>
                <destination>%%Destinations/Queues/GLB_MXRSC_7901_OUTBOUND_QUEUE%%</destination>
            </SessionAttributes>
            <ConfigurableHeaders>
                <JMSDeliveryMode>PERSISTENT</JMSDeliveryMode>
                <JMSExpiration>0</JMSExpiration>
                <JMSPriority>4</JMSPriority>
            </ConfigurableHeaders>
            <ConnectionReference>/Shared Resources/Connections/JMS/JMS Connection.sharedjmscon</ConnectionReference>
        </config>
        <pd:inputBindings>
            <ns:ActivityInput>
                <Body>
                    <xsl:value-of select="concat(concat(tib:pad('EXceed 2000',19,' '),'|',&#xA;tib:pad('Flow Demand 1.0',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|',&#xA;tib:pad(' ',19,' '),'|'),&quot;&#xA;&quot;,$DETAILS/Details/value)"/>
                </Body>
            </ns:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:activity name="Null-3">
        <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
        <pd:resourceType>ae.activities.null</pd:resourceType>
        <pd:x>1257</pd:x>
        <pd:y>405</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:group name="Group (3)">
        <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
        <pd:resourceType>ae.process.group</pd:resourceType>
        <pd:x>424</pd:x>
        <pd:y>213</pd:y>
        <pd:width>686</pd:width>
        <pd:height>360</pd:height>
        <pd:collapsedWidth>57</pd:collapsedWidth>
        <pd:collapsedHeight>70</pd:collapsedHeight>
        <pd:groupVariables/>
        <pd:joinToggle>inherit</pd:joinToggle>
        <config>
            <pd:groupType>inputLoop</pd:groupType>
            <pd:serializable>false</pd:serializable>
            <pd:over>$Start/pfx:PURCHASE_ORDER/pfx:PURCHASE_ORDER_DETAIL/pfx:ITEM</pd:over>
            <pd:iterationElementSlot>detailList</pd:iterationElementSlot>
            <pd:indexSlot>elemIndex</pd:indexSlot>
            <pd:activityOutputName/>
            <pd:accumulateOutput>false</pd:accumulateOutput>
        </config>
        <pd:inputBindings/>
        <pd:expanded>true</pd:expanded>
        <pd:transition>
            <pd:from>start</pd:from>
            <pd:to>Map Data</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Group (2)</pd:from>
            <pd:to>end</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:transition>
            <pd:from>Map Data</pd:from>
            <pd:to>Group (2)</pd:to>
            <pd:lineType>Default</pd:lineType>
            <pd:lineColor>-16777216</pd:lineColor>
            <pd:conditionType>always</pd:conditionType>
        </pd:transition>
        <pd:group name="Group (2)">
            <pd:type>com.tibco.pe.core.LoopGroup</pd:type>
            <pd:resourceType>ae.process.group</pd:resourceType>
            <pd:x>510</pd:x>
            <pd:y>247</pd:y>
            <pd:width>525</pd:width>
            <pd:height>289</pd:height>
            <pd:collapsedWidth>57</pd:collapsedWidth>
            <pd:collapsedHeight>70</pd:collapsedHeight>
            <pd:groupVariables/>
            <pd:joinToggle>inherit</pd:joinToggle>
            <config>
                <pd:groupType>inputLoop</pd:groupType>
                <pd:serializable>false</pd:serializable>
                <pd:over>$Map-Data/pfx:PURCHASE_ORDER_DISTRIBUTION/pfx:ITEM</pd:over>
                <pd:iterationElementSlot>ORDER_DISTRIBUTION</pd:iterationElementSlot>
                <pd:indexSlot>indexarray</pd:indexSlot>
                <pd:activityOutputName/>
                <pd:accumulateOutput>false</pd:accumulateOutput>
            </config>
            <pd:inputBindings/>
            <pd:expanded>true</pd:expanded>
            <pd:transition>
                <pd:from>start</pd:from>
                <pd:to>Assign-2</pd:to>
                <pd:xpathDescription>INDEX=1</pd:xpathDescription>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>xpath</pd:conditionType>
                <pd:xpath>$indexarray=1</pd:xpath>
            </pd:transition>
            <pd:transition>
                <pd:from>start</pd:from>
                <pd:to>Null-2</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>otherwise</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>message</pd:from>
                <pd:to>end</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>details2</pd:from>
                <pd:to>end</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Render Details</pd:from>
                <pd:to>details2</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Null-2</pd:from>
                <pd:to>Render Details</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Assign-2</pd:from>
                <pd:to>Render-Header</pd:to>
                <pd:lineType>One Bend</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Render-Header</pd:from>
                <pd:to>Render-Details-2</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:transition>
                <pd:from>Render-Details-2</pd:from>
                <pd:to>message</pd:to>
                <pd:lineType>Default</pd:lineType>
                <pd:lineColor>-16777216</pd:lineColor>
                <pd:conditionType>always</pd:conditionType>
            </pd:transition>
            <pd:activity name="Assign-2">
                <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
                <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
                <pd:x>609</pd:x>
                <pd:y>317</pd:y>
                <config>
                    <variableName>Variable</variableName>
                </config>
                <pd:inputBindings>
                    <STORE>
                        <value>
                            <xsl:value-of select="$ORDER_DISTRIBUTION/pfx:ITEM/pfx:ORG_LVL_NUMBER"/>
                        </value>
                    </STORE>
                </pd:inputBindings>
            </pd:activity>
            <pd:activity name="Render Details">
                <pd:type>com.tibco.plugin.parse.RenderActivity</pd:type>
                <pd:resourceType>ae.activities.RenderActivity</pd:resourceType>
                <pd:x>764</pd:x>
                <pd:y>452</pd:y>
                <config>
                    <ParseSharedConfig>/Shared Resources/Data Format/DataDetail.sharedparse</ParseSharedConfig>
                </config>
                <pd:inputBindings>
                    <Rows>
                        <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$ORDER_DISTRIBUTION/pfx:ITEM">
                            <root>
                                <d>
                                    <xsl:value-of select="'D'"/>
                                </d>
                                <org_lvl_number>
                                    <xsl:value-of select="pfx:ORG_LVL_NUMBER"/>
                                </org_lvl_number>
                                <PMG_SELL_QTY_SLL_UNITS_PER_INNER>
                                    <xsl:value-of select="tib:pad-front(round(pfx:PMG_SELL_QTY div pfx:SLL_UNITS_PER_INNER), 9, 0)"/>
                                </PMG_SELL_QTY_SLL_UNITS_PER_INNER>
                                <FLOW>
                                    <xsl:value-of select="'FLOW'"/>
                                </FLOW>
                                <espacio1>
                                    <xsl:value-of select="''"/>
                                </espacio1>
                                <espacio2>
                                    <xsl:value-of select="''"/>
                                </espacio2>
                                <xsl:variable name="var" select="current()/pfx:ORG_LVL_NUMBER"/>
                                <CUSTOMERPRIORITY>
                                    <xsl:value-of select="tib:pad-front($getEXEData/group/ITEM[sucursalID=$var]/customerpriority,2,0)"/>
                                </CUSTOMERPRIORITY>
                                <CustomerOverPriority>
                                    <xsl:value-of select="tib:pad-front((for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/CustomerOverPriority)[1],2,0)"/>
                                </CustomerOverPriority>
                                <CUSTOMERUNDERPRIORITY>
                                    <xsl:value-of select="tib:pad-front((for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/CustomerUnderPriority)[1],2,0)"/>
                                </CUSTOMERUNDERPRIORITY>
                                <REQUIREORDERQUANTITY>
                                    <xsl:value-of select="(for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/RequireOrderQuantity)[1]"/>
                                </REQUIREORDERQUANTITY>
                                <ALLOWOVERALLOCATE>
                                    <xsl:value-of select="(for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/AllowOverAllocate)[1]"/>
                                </ALLOWOVERALLOCATE>
                                <pmg_po_number>
                                    <xsl:value-of select="pfx:PMG_PO_NUMBER"/>
                                </pmg_po_number>
                                <PMG_RELEASE_DATE>
                                    <xsl:value-of select="if(string-length(pfx:PMG_RELEASE_DATE) = 0) then '' else tib:format-date('dd/MM/yyyy', tib:parse-date('yyyy-MM-dd HH:mm:ss', pfx:PMG_RELEASE_DATE))"/>
                                </PMG_RELEASE_DATE>
                                <VALUE01>
                                    <xsl:value-of select="concat('S 00', substring($var, 2, 3), '000000000001W 00907W 00907', pfx:PMG_PO_NUMBER, tib:pad-front(pfx:PMG_PO_NUMBER,9,'0'))"/>
                                </VALUE01>
                                <VALUE06>
                                    <xsl:value-of select="'REG07A|||||'"/>
                                </VALUE06>
                            </root>
                        </xsl:for-each>
                    </Rows>
                </pd:inputBindings>
            </pd:activity>
            <pd:activity name="message">
                <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
                <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
                <pd:x>935</pd:x>
                <pd:y>365</pd:y>
                <config>
                    <variableName>DETAILS</variableName>
                </config>
                <pd:inputBindings>
                    <Details>
                        <value>
                            <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="concat($DETAILS/Details/value,$Render-Header/Text, &quot;&#xA;&quot;, $Render-Details-2/Text,&quot;&#xA;&quot;)"/>
                        </value>
                    </Details>
                </pd:inputBindings>
            </pd:activity>
            <pd:activity name="Render-Header">
                <pd:type>com.tibco.plugin.parse.RenderActivity</pd:type>
                <pd:resourceType>ae.activities.RenderActivity</pd:resourceType>
                <pd:x>739</pd:x>
                <pd:y>368</pd:y>
                <config>
                    <ParseSharedConfig>/Shared Resources/Data Format/DataHeader.sharedparse</ParseSharedConfig>
                </config>
                <pd:inputBindings>
                    <Rows>
                        <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$ORDER_DISTRIBUTION/pfx:ITEM">
                            <root>
                                <H>
                                    <xsl:value-of select="'H'"/>
                                </H>
                                <prim_org_lvl_number>
                                    <xsl:value-of select="if ($Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9101) then '91' else '90'"/>
                                </prim_org_lvl_number>
                                <prim_org_lvl_number2>
                                    <xsl:value-of select="if ($Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9101) then '01' else '71'"/>
                                </prim_org_lvl_number2>
                                <prd_lvl_number>
                                    <xsl:value-of select="tib:pad-front(tib:trim(pfx:PRD_LVL_NUMBER), 7, 0)"/>
                                </prd_lvl_number>
                                <PMG_PO_NUMBER>
                                    <xsl:value-of select="pfx:PMG_PO_NUMBER"/>
                                </PMG_PO_NUMBER>
                                <PMGALLEE.PMG_SELL_QTY_SLL_UNITS_PER_INNER>
                                    <xsl:value-of select="tib:pad-front(round(pfx:PMG_SELL_QTY div pfx:SLL_UNITS_PER_INNER), 9, 0)"/>
                                </PMGALLEE.PMG_SELL_QTY_SLL_UNITS_PER_INNER>
                                <SLL_UNITS_PER_INNER1>
                                    <xsl:value-of select="concat( tib:pad-front(tib:trim(round(pfx:SLL_UNITS_PER_INNER)), 4, 0) ,&quot;|&quot;)"/>
                                </SLL_UNITS_PER_INNER1>
                            </root>
                        </xsl:for-each>
                    </Rows>
                </pd:inputBindings>
            </pd:activity>
            <pd:activity name="details2">
                <pd:type>com.tibco.pe.core.AssignActivity</pd:type>
                <pd:resourceType>ae.activities.assignActivity</pd:resourceType>
                <pd:x>959</pd:x>
                <pd:y>452</pd:y>
                <config>
                    <variableName>DETAILS</variableName>
                </config>
                <pd:inputBindings>
                    <Details>
                        <value>
                            <xsl:value-of xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="concat($DETAILS/Details/value, $Render-Details/Text, &quot;&#xA;&quot;)"/>
                        </value>
                    </Details>
                </pd:inputBindings>
            </pd:activity>
            <pd:activity name="Null-2">
                <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
                <pd:resourceType>ae.activities.null</pd:resourceType>
                <pd:x>597</pd:x>
                <pd:y>451</pd:y>
                <config/>
                <pd:inputBindings/>
            </pd:activity>
            <pd:activity name="Render-Details-2">
                <pd:type>com.tibco.plugin.parse.RenderActivity</pd:type>
                <pd:resourceType>ae.activities.RenderActivity</pd:resourceType>
                <pd:x>840</pd:x>
                <pd:y>367</pd:y>
                <config>
                    <ParseSharedConfig>/Shared Resources/Data Format/DataDetail.sharedparse</ParseSharedConfig>
                </config>
                <pd:inputBindings>
                    <Rows>
                        <xsl:for-each xmlns:xsl="http://www.w3.org/1999/XSL/Transform" select="$ORDER_DISTRIBUTION/pfx:ITEM">
                            <root>
                                <d>
                                    <xsl:value-of select="'D'"/>
                                </d>
                                <org_lvl_number>
                                    <xsl:value-of select="pfx:ORG_LVL_NUMBER"/>
                                </org_lvl_number>
                                <PMG_SELL_QTY_SLL_UNITS_PER_INNER>
                                    <xsl:value-of select="tib:pad-front(round(pfx:PMG_SELL_QTY div pfx:SLL_UNITS_PER_INNER), 9, 0)"/>
                                </PMG_SELL_QTY_SLL_UNITS_PER_INNER>
                                <FLOW>
                                    <xsl:value-of select="'FLOW'"/>
                                </FLOW>
                                <espacio1>
                                    <xsl:value-of select="''"/>
                                </espacio1>
                                <espacio2>
                                    <xsl:value-of select="''"/>
                                </espacio2>
                                <xsl:variable name="var" select="current()/pfx:ORG_LVL_NUMBER"/>
                                <CUSTOMERPRIORITY>
                                    <xsl:value-of select="tib:pad-front($getEXEData/group/ITEM[sucursalID=$var]/customerpriority,2,0)"/>
                                </CUSTOMERPRIORITY>
                                <CustomerOverPriority>
                                    <xsl:value-of select="tib:pad-front((for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/CustomerOverPriority)[1],2,0)"/>
                                </CustomerOverPriority>
                                <CUSTOMERUNDERPRIORITY>
                                    <xsl:value-of select="tib:pad-front((for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/CustomerUnderPriority)[1],2,0)"/>
                                </CUSTOMERUNDERPRIORITY>
                                <REQUIREORDERQUANTITY>
                                    <xsl:value-of select="(for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/RequireOrderQuantity)[1]"/>
                                </REQUIREORDERQUANTITY>
                                <ALLOWOVERALLOCATE>
                                    <xsl:value-of select="(for $array in $getEXEData/group/ITEM[sucursalID=$var] return $array[1]/AllowOverAllocate)[1]"/>
                                </ALLOWOVERALLOCATE>
                                <pmg_po_number>
                                    <xsl:value-of select="pfx:PMG_PO_NUMBER"/>
                                </pmg_po_number>
                                <PMG_RELEASE_DATE>
                                    <xsl:value-of select="if(string-length(pfx:PMG_RELEASE_DATE) = 0) then '' else tib:format-date('dd/MM/yyyy', tib:parse-date('yyyy-MM-dd HH:mm:ss', pfx:PMG_RELEASE_DATE))"/>
                                </PMG_RELEASE_DATE>
                                <VALUE01>
                                    <xsl:value-of select="concat('S 00', substring($var, 2, 3), '000000000001W 00907W 00907', pfx:PMG_PO_NUMBER, tib:pad-front(pfx:PMG_PO_NUMBER,9,'0'))"/>
                                </VALUE01>
                                <VALUE06>
                                    <xsl:value-of select="'REG07A|||||'"/>
                                </VALUE06>
                            </root>
                        </xsl:for-each>
                    </Rows>
                </pd:inputBindings>
            </pd:activity>
        </pd:group>
        <pd:activity name="Map Data">
            <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
            <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
            <pd:x>478</pd:x>
            <pd:y>399</pd:y>
            <config>
                <element ref="pfx:PURCHASE_ORDER_DISTRIBUTION"/>
            </config>
            <pd:inputBindings>
                <pfx:PURCHASE_ORDER_DISTRIBUTION>
                    <xsl:variable name="var" select="tib:trim($detailList/pfx:ITEM/pfx:PRD_LVL_NUMBER)"/>
                    <xsl:for-each select="$Start/pfx:PURCHASE_ORDER/pfx:PURCHASE_ORDER_DISTRIBUTION/pfx:ITEM[pfx:PRD_LVL_NUMBER=$var]">
                        <pfx:ITEM>
                            <pfx:PMG_PO_NUMBER>
                                <xsl:copy-of select="pfx:PMG_PO_NUMBER/@xsi:nil"/>
                                <xsl:value-of select="pfx:PMG_PO_NUMBER"/>
                            </pfx:PMG_PO_NUMBER>
                            <pfx:DEPARTAMENT_ID>
                                <xsl:copy-of select="pfx:DEPARTAMENT_ID/@xsi:nil"/>
                                <xsl:value-of select="pfx:DEPARTAMENT_ID"/>
                            </pfx:DEPARTAMENT_ID>
                            <pfx:ORG_LVL_NUMBER>
                                <xsl:copy-of select="pfx:ORG_LVL_NUMBER/@xsi:nil"/>
                                <xsl:value-of select="pfx:ORG_LVL_NUMBER"/>
                            </pfx:ORG_LVL_NUMBER>
                            <pfx:PRD_LVL_NUMBER>
                                <xsl:copy-of select="pfx:PRD_LVL_NUMBER/@xsi:nil"/>
                                <xsl:value-of select="pfx:PRD_LVL_NUMBER"/>
                            </pfx:PRD_LVL_NUMBER>
                            <pfx:PMG_SELL_QTY>
                                <xsl:copy-of select="pfx:PMG_SELL_QTY/@xsi:nil"/>
                                <xsl:value-of select="pfx:PMG_SELL_QTY"/>
                            </pfx:PMG_SELL_QTY>
                            <pfx:SLL_UNITS_PER_INNER>
                                <xsl:copy-of select="pfx:SLL_UNITS_PER_INNER/@xsi:nil"/>
                                <xsl:value-of select="pfx:SLL_UNITS_PER_INNER"/>
                            </pfx:SLL_UNITS_PER_INNER>
                            <pfx:PMG_RELEASE_DATE>
                                <xsl:copy-of select="pfx:PMG_RELEASE_DATE/@xsi:nil"/>
                                <xsl:value-of select="pfx:PMG_RELEASE_DATE"/>
                            </pfx:PMG_RELEASE_DATE>
                        </pfx:ITEM>
                    </xsl:for-each>
                </pfx:PURCHASE_ORDER_DISTRIBUTION>
            </pd:inputBindings>
        </pd:activity>
    </pd:group>
    <pd:activity name="Null-4">
        <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
        <pd:resourceType>ae.activities.null</pd:resourceType>
        <pd:x>1120</pd:x>
        <pd:y>91</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Null-5">
        <pd:type>com.tibco.plugin.timer.NullActivity</pd:type>
        <pd:resourceType>ae.activities.null</pd:resourceType>
        <pd:x>400</pd:x>
        <pd:y>43</pd:y>
        <config/>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Catch">
        <pd:type>com.tibco.pe.core.CatchActivity</pd:type>
        <pd:resourceType>ae.activities.catch</pd:resourceType>
        <pd:x>26</pd:x>
        <pd:y>653</pd:y>
        <pd:handler>true</pd:handler>
        <config>
            <catchAll>true</catchAll>
        </config>
        <pd:inputBindings/>
    </pd:activity>
    <pd:activity name="Generate Error">
        <pd:type>com.tibco.pe.core.GenerateErrorActivity</pd:type>
        <pd:resourceType>ae.activities.throw</pd:resourceType>
        <pd:x>158</pd:x>
        <pd:y>656</pd:y>
        <config>
            <faultName/>
        </config>
        <pd:inputBindings>
            <ns2:ActivityInput>
                <xsl:if test="$_error/ns1:ErrorReport/Msg">
                    <message>
                        <xsl:value-of select="$_error/ns1:ErrorReport/Msg"/>
                    </message>
                </xsl:if>
                <xsl:if test="$_error/ns1:ErrorReport/MsgCode">
                    <messageCode>
                        <xsl:value-of select="$_error/ns1:ErrorReport/MsgCode"/>
                    </messageCode>
                </xsl:if>
            </ns2:ActivityInput>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Render Data</pd:from>
        <pd:to>Group</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>Group (1)</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (1)</pd:from>
        <pd:to>Validator_Main-1</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Validator_Main-1</pd:from>
        <pd:to>Render Data</pd:to>
        <pd:xpathDescription>status=SUCCESS</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Validator_Main-1/group/status='SUCCESS'</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Validator_Main-1</pd:from>
        <pd:to>Null</pd:to>
        <pd:xpathDescription>status=ERROR</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>getEXEData</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>getEXEData</pd:from>
        <pd:to>Validator_Main-2</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Validator_Main-2</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-1</pd:from>
        <pd:to>JMSQueueSender_PO_90</pd:to>
        <pd:xpathDescription>Secos</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9071</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-1</pd:from>
        <pd:to>JMSQueueSender_PO_91</pd:to>
        <pd:xpathDescription>Frescos</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9101</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>JMSQueueSender_DEMAND_91</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>JMSQueueSender_DEMAND_90</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-3</pd:from>
        <pd:to>JMSQueueSender_DEMAND_90</pd:to>
        <pd:xpathDescription>Secos</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9071 and string-length($DETAILS/Details/value)&gt;0</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-3</pd:from>
        <pd:to>JMSQueueSender_DEMAND_91</pd:to>
        <pd:xpathDescription>Frescos</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Start/pfx:PURCHASE_ORDER/pfx:PRIM_ORG_LVL_NUMBER=9101 and string-length($DETAILS/Details/value)&gt;0</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>JMSQueueSender_PO_90</pd:from>
        <pd:to>Null-3</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>JMSQueueSender_PO_91</pd:from>
        <pd:to>Null-3</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-3</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>otherwise</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Validator_Main-2</pd:from>
        <pd:to>Group (3)</pd:to>
        <pd:xpathDescription>status=SUCCESS</pd:xpathDescription>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Validator_Main-2/group/status='SUCCESS'</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (3)</pd:from>
        <pd:to>Null-1</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group</pd:from>
        <pd:to>Null-4</pd:to>
        <pd:xpathDescription>PMG_STAT_CODE=7</pd:xpathDescription>
        <pd:lineType>Multiple Bends</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Start/pfx:PURCHASE_ORDER/pfx:PMG_STAT_CODE=7</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-4</pd:from>
        <pd:to>Null-1</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Group (1)</pd:from>
        <pd:to>Null-5</pd:to>
        <pd:xpathDescription>PMG_STAT_CODE=7</pd:xpathDescription>
        <pd:lineType>Multiple Bends</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>xpath</pd:conditionType>
        <pd:xpath>$Start/pfx:PURCHASE_ORDER/pfx:PMG_STAT_CODE=7</pd:xpath>
    </pd:transition>
    <pd:transition>
        <pd:from>Null-5</pd:from>
        <pd:to>Render Data</pd:to>
        <pd:lineType>One Bend</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Catch</pd:from>
        <pd:to>Generate Error</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>